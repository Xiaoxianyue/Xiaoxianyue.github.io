<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.20" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.74" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://bougiemoonintaurus/zh/Advanced_Algorithms/Week09.html"><meta property="og:site_name" content="奶酪奶酪"><meta property="og:title" content="高级算法——第9周ppt总结"><meta property="og:description" content="0. 进程和线程 通过场景理解进程和线程较为容易：当我们上网浏览打开网页，就开启了一个进程。一个进程可以处理很多任务，这些任务叫线程。我们在这个网页上播放音乐、查找音乐、调整音乐播放进度属于开启了一个个小线程。 总而言之，进程就是线程的集合，进程就是由一个或多个线程构成的，线程是操作系统进行运算调度的最小单位，是进程中的一个最小运行单元。 1. Int..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-12-05T08:49:52.000Z"><meta property="article:author" content="XiaoXianYue"><meta property="article:tag" content="大三上"><meta property="article:tag" content="高级算法课件"><meta property="article:published_time" content="2024-11-15T09:37:28.000Z"><meta property="article:modified_time" content="2024-12-05T08:49:52.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"高级算法——第9周ppt总结","image":[""],"datePublished":"2024-11-15T09:37:28.000Z","dateModified":"2024-12-05T08:49:52.000Z","author":[{"@type":"Person","name":"XiaoXianYue"}]}</script><title>高级算法——第9周ppt总结 | 奶酪奶酪</title><meta name="description" content="0. 进程和线程 通过场景理解进程和线程较为容易：当我们上网浏览打开网页，就开启了一个进程。一个进程可以处理很多任务，这些任务叫线程。我们在这个网页上播放音乐、查找音乐、调整音乐播放进度属于开启了一个个小线程。 总而言之，进程就是线程的集合，进程就是由一个或多个线程构成的，线程是操作系统进行运算调度的最小单位，是进程中的一个最小运行单元。 1. Int...">
    <link rel="preload" href="/assets/style-D3YEg4E9.css" as="style"><link rel="stylesheet" href="/assets/style-D3YEg4E9.css">
    <link rel="modulepreload" href="/assets/app-84lBMjzT.js"><link rel="modulepreload" href="/assets/Week09.html-Mp2yLc2A.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-QUQgzYbo.js" as="script"><link rel="prefetch" href="/assets/bolg.html-BDvoOvFv.js" as="script"><link rel="prefetch" href="/assets/intro.html-3QE0wG9e.js" as="script"><link rel="prefetch" href="/assets/MQTT.html--bPQC7PM.js" as="script"><link rel="prefetch" href="/assets/index.html-CSaaY76_.js" as="script"><link rel="prefetch" href="/assets/intro.html-BQI3pyL1.js" as="script"><link rel="prefetch" href="/assets/ch03.html-ykfqB9Ex.js" as="script"><link rel="prefetch" href="/assets/ch07.html-BRpEBR0T.js" as="script"><link rel="prefetch" href="/assets/notes.html-D1RXx2nF.js" as="script"><link rel="prefetch" href="/assets/question.html-BNB-SJoJ.js" as="script"><link rel="prefetch" href="/assets/s_ass.html-CbGOoTcu.js" as="script"><link rel="prefetch" href="/assets/s_ass01.html-Cuny9FB9.js" as="script"><link rel="prefetch" href="/assets/s_ass02.html-DQ_eNEnc.js" as="script"><link rel="prefetch" href="/assets/s_ass03.html-C161D25E.js" as="script"><link rel="prefetch" href="/assets/s_ass04.html-DgMatPAw.js" as="script"><link rel="prefetch" href="/assets/s_ass05.html-K2n9HzNW.js" as="script"><link rel="prefetch" href="/assets/s_ass06.html-D5a3zdoG.js" as="script"><link rel="prefetch" href="/assets/s_ass07.html-sRspMkaT.js" as="script"><link rel="prefetch" href="/assets/s_ass08.html-CPSPFVVO.js" as="script"><link rel="prefetch" href="/assets/s_ass09.html-Dhbc0i7C.js" as="script"><link rel="prefetch" href="/assets/s_ass10.html-gzT6L_cB.js" as="script"><link rel="prefetch" href="/assets/s_ass11.html-BfP_2pQe.js" as="script"><link rel="prefetch" href="/assets/s_ass12.html-rFMTJqdd.js" as="script"><link rel="prefetch" href="/assets/Assessed_work.html-D0yovSG3.js" as="script"><link rel="prefetch" href="/assets/Report.html-CsCRl8-7.js" as="script"><link rel="prefetch" href="/assets/Week01_ass.html-Do1vHNAK.js" as="script"><link rel="prefetch" href="/assets/Week02.html-gw-5grzF.js" as="script"><link rel="prefetch" href="/assets/Week0203.html-vzLin1NU.js" as="script"><link rel="prefetch" href="/assets/Week02_ass.html-DLHt6wWO.js" as="script"><link rel="prefetch" href="/assets/Week03.html-CxcG7Sqx.js" as="script"><link rel="prefetch" href="/assets/Week04.html-D5mxZYpn.js" as="script"><link rel="prefetch" href="/assets/Week0405.html-C6JlHReG.js" as="script"><link rel="prefetch" href="/assets/Week05.html-Ch0vgVIW.js" as="script"><link rel="prefetch" href="/assets/Week06.html-aRixCMqy.js" as="script"><link rel="prefetch" href="/assets/Week0607.html-CyfiqqF3.js" as="script"><link rel="prefetch" href="/assets/Week07.html-B1udnIfh.js" as="script"><link rel="prefetch" href="/assets/Week08.html-CjuTXKAA.js" as="script"><link rel="prefetch" href="/assets/Week080910.html-BCIe6uBQ.js" as="script"><link rel="prefetch" href="/assets/Week0910.html-C97dcD3T.js" as="script"><link rel="prefetch" href="/assets/Week10.html-CQyh2Uq5.js" as="script"><link rel="prefetch" href="/assets/mistakebook.html-C4YFq3f3.js" as="script"><link rel="prefetch" href="/assets/summary.html-BeKP8aJ1.js" as="script"><link rel="prefetch" href="/assets/CS_Class_01.html-Ch-y_FBu.js" as="script"><link rel="prefetch" href="/assets/CS_Class_02.html-DHzxv3DC.js" as="script"><link rel="prefetch" href="/assets/CS_Method.html-RNl8rocu.js" as="script"><link rel="prefetch" href="/assets/CS_array_string.html-D6OMPkIw.js" as="script"><link rel="prefetch" href="/assets/CS_basic_conception.html-CDZuPSId.js" as="script"><link rel="prefetch" href="/assets/CS_condition_loop.html-BJvXYcVV.js" as="script"><link rel="prefetch" href="/assets/CS_delegate.html-D0zmAA3t.js" as="script"><link rel="prefetch" href="/assets/1.html-CFpNK6c_.js" as="script"><link rel="prefetch" href="/assets/2.html-BCoE_LtN.js" as="script"><link rel="prefetch" href="/assets/3.html-hFtoy3g_.js" as="script"><link rel="prefetch" href="/assets/4.html-DLUvqtQw.js" as="script"><link rel="prefetch" href="/assets/01.html-BgJryf42.js" as="script"><link rel="prefetch" href="/assets/02.html-DOA2JYH5.js" as="script"><link rel="prefetch" href="/assets/03.html-BJbIeyUF.js" as="script"><link rel="prefetch" href="/assets/04.html-CWat5Evp.js" as="script"><link rel="prefetch" href="/assets/05.html-BDKfbPUu.js" as="script"><link rel="prefetch" href="/assets/DS_review.html-BFvQ5hvc.js" as="script"><link rel="prefetch" href="/assets/01.html-CN61-ZuU.js" as="script"><link rel="prefetch" href="/assets/02.html-Dj4pJVhU.js" as="script"><link rel="prefetch" href="/assets/03.html-CeIGUZ_N.js" as="script"><link rel="prefetch" href="/assets/ass_408.html-CTb5GOWw.js" as="script"><link rel="prefetch" href="/assets/bottleneck.html-D3Y-pPzx.js" as="script"><link rel="prefetch" href="/assets/cnn.html-Dzifm-hi.js" as="script"><link rel="prefetch" href="/assets/dp_api.html-CN6ffcFo.js" as="script"><link rel="prefetch" href="/assets/early_stop.html-CNHvtwhB.js" as="script"><link rel="prefetch" href="/assets/mlp_exe.html-BIITKQ_T.js" as="script"><link rel="prefetch" href="/assets/rnn.html-DC-M_Nu0.js" as="script"><link rel="prefetch" href="/assets/01-03.html-BVEkhQSU.js" as="script"><link rel="prefetch" href="/assets/CNN.html-CX5xpY92.js" as="script"><link rel="prefetch" href="/assets/OA.html-CcmlFhpJ.js" as="script"><link rel="prefetch" href="/assets/RNN.html-DiNXVdvF.js" as="script"><link rel="prefetch" href="/assets/Daily_assignment.html-BT1ECiDs.js" as="script"><link rel="prefetch" href="/assets/math.html-OSykxTWf.js" as="script"><link rel="prefetch" href="/assets/Week01.html-med7BKV3.js" as="script"><link rel="prefetch" href="/assets/Week02.html-DaD4SCmK.js" as="script"><link rel="prefetch" href="/assets/Week03.html-DrQjXlK0.js" as="script"><link rel="prefetch" href="/assets/Week04.html-0gdmekB-.js" as="script"><link rel="prefetch" href="/assets/Week05.html-DFuy358P.js" as="script"><link rel="prefetch" href="/assets/final_report.html-D84H8_sJ.js" as="script"><link rel="prefetch" href="/assets/assignment.html-DJLolgLr.js" as="script"><link rel="prefetch" href="/assets/ch02.html-fG4YxIHU.js" as="script"><link rel="prefetch" href="/assets/ch03.html-DHLTK4xn.js" as="script"><link rel="prefetch" href="/assets/ch04.html-CkZ-mwCg.js" as="script"><link rel="prefetch" href="/assets/ch05.html-Cmm8zMQI.js" as="script"><link rel="prefetch" href="/assets/ch06.html-oZKUX5c-.js" as="script"><link rel="prefetch" href="/assets/ch07.html-CPYgigXy.js" as="script"><link rel="prefetch" href="/assets/ch08.html-D8B5W61f.js" as="script"><link rel="prefetch" href="/assets/ch09.html-GCDWuoce.js" as="script"><link rel="prefetch" href="/assets/ch10.html-DU4TaHHZ.js" as="script"><link rel="prefetch" href="/assets/ch11.html-36FV_4MN.js" as="script"><link rel="prefetch" href="/assets/ch12.html-DcOStlOd.js" as="script"><link rel="prefetch" href="/assets/enreport.html-BF_qzgXE.js" as="script"><link rel="prefetch" href="/assets/re_ve.html-CfZtHCyf.js" as="script"><link rel="prefetch" href="/assets/report.html-CsnuD1co.js" as="script"><link rel="prefetch" href="/assets/sum.html-D8hoibjI.js" as="script"><link rel="prefetch" href="/assets/01.html-Bsyjw0BP.js" as="script"><link rel="prefetch" href="/assets/02.html-CydOjJ0y.js" as="script"><link rel="prefetch" href="/assets/03.html-CoD1V-Ns.js" as="script"><link rel="prefetch" href="/assets/04.html-C8-zrKiF.js" as="script"><link rel="prefetch" href="/assets/05.html-DUOfRWIU.js" as="script"><link rel="prefetch" href="/assets/Review_question.html-B6s8yZYd.js" as="script"><link rel="prefetch" href="/assets/bert_essay.html-69-9Q689.js" as="script"><link rel="prefetch" href="/assets/exercise.html-BAARS1l_.js" as="script"><link rel="prefetch" href="/assets/question02.html-ClBUhqJC.js" as="script"><link rel="prefetch" href="/assets/task.html-DQYHt-oX.js" as="script"><link rel="prefetch" href="/assets/A_L.html-DOhvt5aB.js" as="script"><link rel="prefetch" href="/assets/Coventry_Class_01.html-BM7MlK5A.js" as="script"><link rel="prefetch" href="/assets/Coventry_Class_02.html-ZmZ2Rqtt.js" as="script"><link rel="prefetch" href="/assets/Coventry_Method.html-B803M_4s.js" as="script"><link rel="prefetch" href="/assets/Delegates_and_Events.html-uHvxia9O.js" as="script"><link rel="prefetch" href="/assets/Generics.html-DvaSraEl.js" as="script"><link rel="prefetch" href="/assets/Inheritance.html-yVuBB6_b.js" as="script"><link rel="prefetch" href="/assets/Interfaces.html-BzS4S1nw.js" as="script"><link rel="prefetch" href="/assets/review.html-BwFY5W7k.js" as="script"><link rel="prefetch" href="/assets/Agile_01.html-xIFRuz7x.js" as="script"><link rel="prefetch" href="/assets/Agile_02.html-DP75L8ZP.js" as="script"><link rel="prefetch" href="/assets/Data_modelling.html-DlvPjA1V.js" as="script"><link rel="prefetch" href="/assets/Ethics.html-PO0vHuAJ.js" as="script"><link rel="prefetch" href="/assets/Gof.html-BfGp-nbW.js" as="script"><link rel="prefetch" href="/assets/Gof_02.html-skqbQ_aD.js" as="script"><link rel="prefetch" href="/assets/OO_conception.html-CNZ-k-wz.js" as="script"><link rel="prefetch" href="/assets/OO_principle.html-C-INbLPa.js" as="script"><link rel="prefetch" href="/assets/Software_Design.html-CzVG-xMk.js" as="script"><link rel="prefetch" href="/assets/Software_Testing.html-0Tb4XXYA.js" as="script"><link rel="prefetch" href="/assets/TOEFL_speaking1.html-CHq4_tTd.js" as="script"><link rel="prefetch" href="/assets/TOEFL_speaking2.html-CxaJCG_r.js" as="script"><link rel="prefetch" href="/assets/TOEFL_speaking3.html-BTCyy3s5.js" as="script"><link rel="prefetch" href="/assets/TOEFL_speaking4.html-O9p4RIhb.js" as="script"><link rel="prefetch" href="/assets/TOEFL_writing.html-CQdcnBOF.js" as="script"><link rel="prefetch" href="/assets/accumulation.html-D1bx1-tJ.js" as="script"><link rel="prefetch" href="/assets/ad_wr.html-DaI35klt.js" as="script"><link rel="prefetch" href="/assets/assi_dairy.html-DJdACvqB.js" as="script"><link rel="prefetch" href="/assets/correction_notebook.html-DgB011eq.js" as="script"><link rel="prefetch" href="/assets/listen_class.html-DysSitIf.js" as="script"><link rel="prefetch" href="/assets/logical_chain.html-DqJ-sQXx.js" as="script"><link rel="prefetch" href="/assets/question.html-DOidLUxg.js" as="script"><link rel="prefetch" href="/assets/reading.html-B47G7Iqj.js" as="script"><link rel="prefetch" href="/assets/reading01.html-Df5LkEBN.js" as="script"><link rel="prefetch" href="/assets/reading02.html-Dt491qcH.js" as="script"><link rel="prefetch" href="/assets/spclass.html-BVJwyjZx.js" as="script"><link rel="prefetch" href="/assets/spk_mtrl.html-Bs-vvJX1.js" as="script"><link rel="prefetch" href="/assets/translation_training.html-DF3d723r.js" as="script"><link rel="prefetch" href="/assets/wr_class.html-BkT8Gfyu.js" as="script"><link rel="prefetch" href="/assets/wr_mistake.html-DD2A8ME9.js" as="script"><link rel="prefetch" href="/assets/stock.html-v3-18EWZ.js" as="script"><link rel="prefetch" href="/assets/Agricultural_Bank_of_China.html-CfGalI-E.js" as="script"><link rel="prefetch" href="/assets/Agriculture_robot.html-BD-f9BPV.js" as="script"><link rel="prefetch" href="/assets/istarshine.html-DqdR0pjn.js" as="script"><link rel="prefetch" href="/assets/istarshine01.html-CzFor8Rn.js" as="script"><link rel="prefetch" href="/assets/self_introduce.html-B-u6Yd1T.js" as="script"><link rel="prefetch" href="/assets/Data-type.html-CymMaRCK.js" as="script"><link rel="prefetch" href="/assets/Dictionary.html-o3TWDNIw.js" as="script"><link rel="prefetch" href="/assets/Document.html-DpTnUNnC.js" as="script"><link rel="prefetch" href="/assets/For.html-DtZq30mG.js" as="script"><link rel="prefetch" href="/assets/Homework1.html-Cc065WMN.js" as="script"><link rel="prefetch" href="/assets/If_Homework.html-DuSmLJGE.js" as="script"><link rel="prefetch" href="/assets/List.html-DpItdwAN.js" as="script"><link rel="prefetch" href="/assets/List_Homework.html-Ql2jORkj.js" as="script"><link rel="prefetch" href="/assets/Numeric.html-x2rwFYcK.js" as="script"><link rel="prefetch" href="/assets/Set.html-BdDQlCH1.js" as="script"><link rel="prefetch" href="/assets/String.html-DrMVnxiv.js" as="script"><link rel="prefetch" href="/assets/String_Homework.html-Dk9WSRKQ.js" as="script"><link rel="prefetch" href="/assets/Variable.html-BEyRAFp-.js" as="script"><link rel="prefetch" href="/assets/While.html-BAe1bASv.js" as="script"><link rel="prefetch" href="/assets/bool.html-BG2r7SdZ.js" as="script"><link rel="prefetch" href="/assets/function.html-D9z7tiP6.js" as="script"><link rel="prefetch" href="/assets/if.html-Cfdjev33.js" as="script"><link rel="prefetch" href="/assets/recursion.html-oMdG0Rm0.js" as="script"><link rel="prefetch" href="/assets/tuple.html-PeVjy3a_.js" as="script"><link rel="prefetch" href="/assets/404.html-D76wtL2M.js" as="script"><link rel="prefetch" href="/assets/index.html-D9iSJbzp.js" as="script"><link rel="prefetch" href="/assets/index.html-CaNPnU8Y.js" as="script"><link rel="prefetch" href="/assets/index.html-CpR_grgH.js" as="script"><link rel="prefetch" href="/assets/index.html-CXjTjI6t.js" as="script"><link rel="prefetch" href="/assets/index.html-DOD-5aN6.js" as="script"><link rel="prefetch" href="/assets/index.html-ClVrfs5I.js" as="script"><link rel="prefetch" href="/assets/index.html-C1n0NAqC.js" as="script"><link rel="prefetch" href="/assets/index.html-C-lpVN8J.js" as="script"><link rel="prefetch" href="/assets/index.html-B2cX_Q17.js" as="script"><link rel="prefetch" href="/assets/index.html-BXqaqhws.js" as="script"><link rel="prefetch" href="/assets/index.html-DYtM_Z4T.js" as="script"><link rel="prefetch" href="/assets/index.html-BH7EkY35.js" as="script"><link rel="prefetch" href="/assets/index.html-D5qVg5Il.js" as="script"><link rel="prefetch" href="/assets/index.html-mKwv4N4P.js" as="script"><link rel="prefetch" href="/assets/index.html-CzNc8Z2i.js" as="script"><link rel="prefetch" href="/assets/index.html-Dwr-4FA5.js" as="script"><link rel="prefetch" href="/assets/index.html-BcnrIDQW.js" as="script"><link rel="prefetch" href="/assets/index.html-CgkmyniY.js" as="script"><link rel="prefetch" href="/assets/index.html-8n1mya6-.js" as="script"><link rel="prefetch" href="/assets/index.html-D2gXR6lL.js" as="script"><link rel="prefetch" href="/assets/index.html-CQZsZ6nE.js" as="script"><link rel="prefetch" href="/assets/index.html-r5UmHYc8.js" as="script"><link rel="prefetch" href="/assets/index.html-Cp0xZzup.js" as="script"><link rel="prefetch" href="/assets/index.html-CGtnl6OT.js" as="script"><link rel="prefetch" href="/assets/index.html-JWtzarEt.js" as="script"><link rel="prefetch" href="/assets/index.html-C_WTLa6p.js" as="script"><link rel="prefetch" href="/assets/index.html-Cyl5yutW.js" as="script"><link rel="prefetch" href="/assets/index.html-CesX3mUY.js" as="script"><link rel="prefetch" href="/assets/index.html-DjnqdHHD.js" as="script"><link rel="prefetch" href="/assets/index.html-Hs7TGvLk.js" as="script"><link rel="prefetch" href="/assets/index.html-DMgeipi_.js" as="script"><link rel="prefetch" href="/assets/index.html-KW0hXAOn.js" as="script"><link rel="prefetch" href="/assets/index.html-Xkk7pgLT.js" as="script"><link rel="prefetch" href="/assets/index.html-Dju5aeU9.js" as="script"><link rel="prefetch" href="/assets/index.html-TNtLHm9F.js" as="script"><link rel="prefetch" href="/assets/index.html-UeE0l6qh.js" as="script"><link rel="prefetch" href="/assets/index.html-D5ezi8EG.js" as="script"><link rel="prefetch" href="/assets/index.html-Ci2Dg8W2.js" as="script"><link rel="prefetch" href="/assets/index.html-H844SkH1.js" as="script"><link rel="prefetch" href="/assets/index.html-Dpjqe0YM.js" as="script"><link rel="prefetch" href="/assets/index.html-B1ijz358.js" as="script"><link rel="prefetch" href="/assets/index.html-B3uBtze_.js" as="script"><link rel="prefetch" href="/assets/index.html-teMZSwx0.js" as="script"><link rel="prefetch" href="/assets/index.html-D_lwJkWG.js" as="script"><link rel="prefetch" href="/assets/index.html-DHEmKqc-.js" as="script"><link rel="prefetch" href="/assets/index.html-OVH6GD2t.js" as="script"><link rel="prefetch" href="/assets/index.html-M_mbE1HK.js" as="script"><link rel="prefetch" href="/assets/index.html-DZBpgM7U.js" as="script"><link rel="prefetch" href="/assets/index.html-CIiwCl9H.js" as="script"><link rel="prefetch" href="/assets/index.html-CMY-kAv9.js" as="script"><link rel="prefetch" href="/assets/index.html-D0Cb8_83.js" as="script"><link rel="prefetch" href="/assets/index.html-hmPXxEpy.js" as="script"><link rel="prefetch" href="/assets/index.html-CSWLS2NC.js" as="script"><link rel="prefetch" href="/assets/index.html-veiL62Yy.js" as="script"><link rel="prefetch" href="/assets/index.html-Dv6wr6mZ.js" as="script"><link rel="prefetch" href="/assets/index.html-C2ftVb58.js" as="script"><link rel="prefetch" href="/assets/index.html-20rDLDqt.js" as="script"><link rel="prefetch" href="/assets/index.html-CUgzeY46.js" as="script"><link rel="prefetch" href="/assets/index.html-WfSNltCO.js" as="script"><link rel="prefetch" href="/assets/index.html-C3DKcH_t.js" as="script"><link rel="prefetch" href="/assets/index.html-DKyFuAtB.js" as="script"><link rel="prefetch" href="/assets/index.html-XGoAIgUX.js" as="script"><link rel="prefetch" href="/assets/index.html-4CfiZ8ST.js" as="script"><link rel="prefetch" href="/assets/index.html-CSUKz5r1.js" as="script"><link rel="prefetch" href="/assets/index.html-CYd43ot4.js" as="script"><link rel="prefetch" href="/assets/index.html-C11yr8rm.js" as="script"><link rel="prefetch" href="/assets/index.html-BA2ssZDP.js" as="script"><link rel="prefetch" href="/assets/index.html-CadKbx0D.js" as="script"><link rel="prefetch" href="/assets/index.html-DyGak3Po.js" as="script"><link rel="prefetch" href="/assets/index.html-CFWw8jv4.js" as="script"><link rel="prefetch" href="/assets/index.html-CrTPa984.js" as="script"><link rel="prefetch" href="/assets/index.html-hzstyiWf.js" as="script"><link rel="prefetch" href="/assets/index.html-DG30Yigo.js" as="script"><link rel="prefetch" href="/assets/index.html-Dy5Tlwp3.js" as="script"><link rel="prefetch" href="/assets/index.html-CwHU9LcX.js" as="script"><link rel="prefetch" href="/assets/index.html-4ok7tNjU.js" as="script"><link rel="prefetch" href="/assets/index.html-DpO-yTAZ.js" as="script"><link rel="prefetch" href="/assets/index.html-B6CHm0sV.js" as="script"><link rel="prefetch" href="/assets/index.html-C_ryqy7q.js" as="script"><link rel="prefetch" href="/assets/index.html-BIpc_w8X.js" as="script"><link rel="prefetch" href="/assets/index.html-WI8XoBCe.js" as="script"><link rel="prefetch" href="/assets/index.html-L3YDa12o.js" as="script"><link rel="prefetch" href="/assets/index.html-DUDwGF-u.js" as="script"><link rel="prefetch" href="/assets/index.html-B3js6QV3.js" as="script"><link rel="prefetch" href="/assets/index.html-Cr8IgsYR.js" as="script"><link rel="prefetch" href="/assets/index.html-CB-_4uvn.js" as="script"><link rel="prefetch" href="/assets/index.html-CL-EXufL.js" as="script"><link rel="prefetch" href="/assets/index.html-gZeX01yz.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-DXWKOczD.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/zh/" aria-label="带我回家"><img class="vp-nav-logo" src="/logo.jpg" alt><!----><span class="vp-site-name hide-in-pad">奶酪奶酪</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/zh/" aria-label="MMoon" iconsizing="height"><!--[--><i class="vp-icon iconfont icon-home" sizing="height"></i><!--]-->MMoon<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/#" aria-label="学校科目" iconsizing="height"><!--[--><i class="vp-icon iconfont icon-style" sizing="height"></i><!--]-->学校科目<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="编程语言"><!--[--><i class="vp-icon iconfont icon-editor" sizing="height"></i>编程语言<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Python</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/" aria-label="课堂笔记" iconsizing="both"><!---->课堂笔记<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">c#</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/#" aria-label="oop" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-xxx" sizing="both"></i><!--]-->oop<!----></a></li></ul></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="小猫" iconsizing="height"><!--[--><i class="vp-icon iconfont icon-github" sizing="height"></i><!--]-->小猫<!----></a></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><div class="vp-nav-item"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="选择语言"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon i18n-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="i18n icon" name="i18n" style="width:1rem;height:1rem;vertical-align:middle;"><path d="M379.392 460.8 494.08 575.488l-42.496 102.4L307.2 532.48 138.24 701.44l-71.68-72.704L234.496 460.8l-45.056-45.056c-27.136-27.136-51.2-66.56-66.56-108.544h112.64c7.68 14.336 16.896 27.136 26.112 35.84l45.568 46.08 45.056-45.056C382.976 312.32 409.6 247.808 409.6 204.8H0V102.4h256V0h102.4v102.4h256v102.4H512c0 70.144-37.888 161.28-87.04 210.944L378.88 460.8zM576 870.4 512 1024H409.6l256-614.4H768l256 614.4H921.6l-64-153.6H576zM618.496 768h196.608L716.8 532.48 618.496 768z"></path></svg><!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/" aria-label="English" iconsizing="both"><!---->English<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/zh/Advanced_Algorithms/Week09.html" aria-label="简体中文" iconsizing="both"><!---->简体中文<!----></a></li></ul></button></div></div><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/Xiaoxianyue/Xiaoxianyue.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><form class="search-box" role="search"><input type="search" placeholder="搜索" autocomplete="off" spellcheck="false" value><!----></form><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/zh/" aria-label="MMoon" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-home" sizing="both"></i><!--]-->MMoon<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">Advanced Algorithms</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/zh/Advanced_Algorithms/summary.html" aria-label="所有知识点总结" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-python" sizing="both"></i><!--]-->所有知识点总结<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/Advanced_Algorithms/mistakebook.html" aria-label="错误总结" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-python" sizing="both"></i><!--]-->错误总结<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/Advanced_Algorithms/Week01_ass.html" aria-label="高级算法——第1周非评估作业" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-python" sizing="both"></i><!--]-->高级算法——第1周非评估作业<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/Advanced_Algorithms/Week0203.html" aria-label="高级算法——第2,3周查漏补缺" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-python" sizing="both"></i><!--]-->高级算法——第2,3周查漏补缺<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/Advanced_Algorithms/Week02.html" aria-label="高级算法——第2周ppt——排序算法" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-python" sizing="both"></i><!--]-->高级算法——第2周ppt——排序算法<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/Advanced_Algorithms/Week02_ass.html" aria-label="高级算法——第2周非评估作业" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-python" sizing="both"></i><!--]-->高级算法——第2周非评估作业<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/Advanced_Algorithms/Week03.html" aria-label="高级算法——第3周ppt——搜索算法和堆" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-python" sizing="both"></i><!--]-->高级算法——第3周ppt——搜索算法和堆<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/Advanced_Algorithms/Week0405.html" aria-label="高级算法——第4,5周查漏补缺" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-python" sizing="both"></i><!--]-->高级算法——第4,5周查漏补缺<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/Advanced_Algorithms/Week04.html" aria-label="高级算法——第4周略讲——二叉树" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-python" sizing="both"></i><!--]-->高级算法——第4周略讲——二叉树<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/Advanced_Algorithms/Week05.html" aria-label="高级算法——第5周ppt总结" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-python" sizing="both"></i><!--]-->高级算法——第5周ppt总结<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/Advanced_Algorithms/Week0607.html" aria-label="高级算法——第6, 7周查漏补缺" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-python" sizing="both"></i><!--]-->高级算法——第6, 7周查漏补缺<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/Advanced_Algorithms/Week06.html" aria-label="高级算法——第6周ppt总结" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-python" sizing="both"></i><!--]-->高级算法——第6周ppt总结<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/Advanced_Algorithms/Week07.html" aria-label="高级算法——第7周ppt总结" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-python" sizing="both"></i><!--]-->高级算法——第7周ppt总结<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/Advanced_Algorithms/Week08.html" aria-label="高级算法——第8周ppt总结" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-python" sizing="both"></i><!--]-->高级算法——第8周ppt总结<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/Advanced_Algorithms/Week080910.html" aria-label="高级算法——第8周查漏补缺" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-python" sizing="both"></i><!--]-->高级算法——第8周查漏补缺<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/Advanced_Algorithms/Week0910.html" aria-label="高级算法——第9,10周查漏补缺" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-python" sizing="both"></i><!--]-->高级算法——第9,10周查漏补缺<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/zh/Advanced_Algorithms/Week09.html" aria-label="高级算法——第9周ppt总结" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-python" sizing="both"></i><!--]-->高级算法——第9周ppt总结<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/Advanced_Algorithms/Week10.html" aria-label="高级算法——第10周ppt总结" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-python" sizing="both"></i><!--]-->高级算法——第10周ppt总结<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/Advanced_Algorithms/Report.html" aria-label="高级算法作业" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-python" sizing="both"></i><!--]-->高级算法作业<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/Advanced_Algorithms/Assessed_work.html" aria-label="高级算法作业第一版代码" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-python" sizing="both"></i><!--]-->高级算法作业第一版代码<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Big Data</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">CS</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Data Analysis</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Data Structure</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Deep Learning</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Deep Thinking</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Diary</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">GRE</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Internship</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Java Homework</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Machine Learning</span><span class="vp-arrow end"></span></button><!----></section></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/MQTT.html" aria-label="MQTT" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-alias" sizing="both"></i><!--]-->MQTT<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">NLP</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">OOP</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Python1v1</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Software Design</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">TOEFL</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Wuhan Uni</span><span class="vp-arrow end"></span></button><!----></section></li><li><a class="route-link auto-link vp-sidebar-link" href="/zh/intro.html" aria-label="介绍页" iconsizing="both"><!--[--><i class="vp-icon iconfont icon-circle-info" sizing="both"></i><!--]-->介绍页<!----></a></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><i class="vp-icon iconfont icon-python" sizing="height"></i>高级算法——第9周ppt总结</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">XiaoXianYue</span></span><span property="author" content="XiaoXianYue"></span></span><span class="page-original-info">原创</span><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2024年11月15日</span><meta property="datePublished" content="2024-11-15T09:37:28.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 20 分钟</span><meta property="timeRequired" content="PT20M"></span><span class="page-category-info" aria-label="分类🌈" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color8 clickable" role="navigation">大三上</span><span class="page-category-item color1 clickable" role="navigation">高级算法课件</span><!--]--><meta property="articleSection" content="大三上,高级算法课件"></span><span class="page-tag-info" aria-label="标签🏷" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color8 clickable" role="navigation">大三上</span><span class="page-tag-item color1 clickable" role="navigation">高级算法课件</span><!--]--><meta property="keywords" content="大三上,高级算法课件"></span></div><hr></div><!----><!----><div class="theme-hope-content" vp-content><h2 id="_0-进程和线程" tabindex="-1"><a class="header-anchor" href="#_0-进程和线程"><span>0. 进程和线程</span></a></h2><p>通过场景理解进程和线程较为容易：当我们上网浏览打开网页，就开启了一个进程。一个进程可以处理很多任务，这些任务叫线程。我们在这个网页上播放音乐、查找音乐、调整音乐播放进度属于开启了一个个小线程。</p><p>总而言之，进程就是线程的集合，进程就是由一个或多个线程构成的，线程是操作系统进行<strong>运算调度的最小单位</strong>，是进程中的一个最小运行单元。</p><h2 id="_1-intended-learning" tabindex="-1"><a class="header-anchor" href="#_1-intended-learning"><span>1. Intended Learning</span></a></h2><ul><li><p>Understand the multithreading concept</p></li><li><p>Be able to explain applications of multithreading</p></li><li><p>Understand and manage data sharing in multithreaded environments</p></li><li><p>Be able to explain the race condition</p></li><li><p>Understand implementation of threading (mainly) in Python and (partly) in C++</p></li></ul><h2 id="_2-what-is-multithreading" tabindex="-1"><a class="header-anchor" href="#_2-what-is-multithreading"><span>2. What is multithreading?</span></a></h2><ul><li>Many of the applications you’ve written so far do one thing after another</li><li>Multithreading allows us to run an application as separate processes which run ‘asynchronously’</li><li>i.e., the timing is arbitrary</li><li>This results in processes which run at the same or similar / overlapping times</li></ul><h2 id="_3-applications-of-multithreading" tabindex="-1"><a class="header-anchor" href="#_3-applications-of-multithreading"><span>3. Applications of multithreading</span></a></h2><ul><li>We’ll now look at two applications of multithreading: <ol><li>Chat server</li><li>Newspaper size getter</li></ol></li></ul><h2 id="_4-concurrent-example-1-chat-server" tabindex="-1"><a class="header-anchor" href="#_4-concurrent-example-1-chat-server"><span>4. Concurrent Example 1: CHAT SERVER</span></a></h2><ul><li><p>The first example of a threaded environment is a chat server</p></li><li><p>We’ll set this up and run it in the lecture</p></li><li><p>Note that all the code in this session is on Aula, but it needs a stack and a server</p></li><li><p>Best way to do this is Codio</p></li><li><p>There are instructions how to set this up on Aula</p></li></ul><h3 id="代码" tabindex="-1"><a class="header-anchor" href="#代码"><span>代码</span></a></h3><p><strong>Aula 原版：</strong></p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-122-0" aria-selected="true">sever</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-122-1" aria-selected="false">client</button></div><!--[--><div class="vp-code-tab active" id="codetab-122-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">sever</div><!--[--><div class="language-python line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="python" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#88846F;">#server.py</span></span>
<span class="line"><span style="color:#88846F;">#run this first </span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> socket</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> threading</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">sock </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> socket.socket(socket.</span><span style="color:#AE81FF;">AF_INET</span><span style="color:#F8F8F2;">, socket.</span><span style="color:#AE81FF;">SOCK_STREAM</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">sock.bind((</span><span style="color:#E6DB74;">&#39;127.0.0.1&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#AE81FF;">12345</span><span style="color:#F8F8F2;">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">sock.listen(</span><span style="color:#AE81FF;">1</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">connections </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> []</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">def</span><span style="color:#A6E22E;"> handler</span><span style="color:#F8F8F2;"> (</span><span style="color:#FD971F;font-style:italic;">c</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">a</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F92672;">    while</span><span style="color:#AE81FF;"> True</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">        data </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> c.recv(</span><span style="color:#AE81FF;">4098</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F92672;">        for</span><span style="color:#F8F8F2;"> connection </span><span style="color:#F92672;">in</span><span style="color:#F8F8F2;"> connections:</span></span>
<span class="line"><span style="color:#F92672;">            if</span><span style="color:#F8F8F2;"> connection </span><span style="color:#F92672;">!=</span><span style="color:#F8F8F2;"> c:</span></span>
<span class="line"><span style="color:#F8F8F2;">                  connection.send(data)</span></span>
<span class="line"><span style="color:#F92672;">        if</span><span style="color:#F92672;"> not</span><span style="color:#F8F8F2;"> data:</span></span>
<span class="line"><span style="color:#F92672;">              break</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">while</span><span style="color:#AE81FF;"> True</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">    c, a </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> sock.accept()</span></span>
<span class="line"><span style="color:#F8F8F2;">    cThread </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> threading.Thread(</span><span style="color:#FD971F;font-style:italic;">target</span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;">handler, </span><span style="color:#FD971F;font-style:italic;">args</span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;">(c, a))</span></span>
<span class="line"><span style="color:#F8F8F2;">    cThread.daemon </span><span style="color:#F92672;">=</span><span style="color:#AE81FF;"> True</span></span>
<span class="line"><span style="color:#F8F8F2;">    cThread.start()</span></span>
<span class="line"><span style="color:#F8F8F2;">    connections.append(c)</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(connections)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><!--]--></div><div class="vp-code-tab" id="codetab-122-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">client</div><!--[--><div class="language-python line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="python" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#88846F;">#client.py</span></span>
<span class="line"><span style="color:#88846F;">#run multiple instances of this after starting the server</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> socket</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> threading</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">sock </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> socket.socket(socket.</span><span style="color:#AE81FF;">AF_INET</span><span style="color:#F8F8F2;">, socket.</span><span style="color:#AE81FF;">SOCK_STREAM</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">sock.connect((</span><span style="color:#E6DB74;">&#39;127.0.0.1&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#AE81FF;">12345</span><span style="color:#F8F8F2;">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">def</span><span style="color:#A6E22E;"> sendMsg</span><span style="color:#F8F8F2;">():</span></span>
<span class="line"><span style="color:#F92672;">    while</span><span style="color:#AE81FF;"> True</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">        msg </span><span style="color:#F92672;">=</span><span style="color:#66D9EF;"> input</span><span style="color:#F8F8F2;">().encode()</span></span>
<span class="line"><span style="color:#F8F8F2;">        sock.send(msg)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">iThread </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> threading.Thread(</span><span style="color:#FD971F;font-style:italic;">target</span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;">sendMsg)</span></span>
<span class="line"><span style="color:#F8F8F2;">iThread.daemon </span><span style="color:#F92672;">=</span><span style="color:#AE81FF;"> True</span></span>
<span class="line"><span style="color:#F8F8F2;">iThread.start()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">while</span><span style="color:#AE81FF;"> True</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#88846F;">    #this is data received back from the server</span></span>
<span class="line"><span style="color:#F8F8F2;">    data </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> sock.recv(</span><span style="color:#AE81FF;">4098</span><span style="color:#F8F8F2;">).decode()</span></span>
<span class="line"><span style="color:#F92672;">    if</span><span style="color:#F92672;"> not</span><span style="color:#F8F8F2;"> data:</span></span>
<span class="line"><span style="color:#F92672;">        break</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(data)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><!--]--></div><!--]--></div><p><strong>注释版：</strong></p><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-133-0" aria-selected="true">sever</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-133-1" aria-selected="false">client</button></div><!--[--><div class="vp-code-tab active" id="codetab-133-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">sever</div><!--[--><div class="language-python line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="python" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#88846F;"># 导入 socket 和 threading 模块</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> socket</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> threading</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 创建一个 socket 对象，使用 IPv4 和 TCP 协议</span></span>
<span class="line"><span style="color:#F8F8F2;">sock </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> socket.socket(socket.</span><span style="color:#AE81FF;">AF_INET</span><span style="color:#F8F8F2;">, socket.</span><span style="color:#AE81FF;">SOCK_STREAM</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 绑定服务器 IP 和端口</span></span>
<span class="line"><span style="color:#F8F8F2;">sock.bind((</span><span style="color:#E6DB74;">&#39;127.0.0.1&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#AE81FF;">12345</span><span style="color:#F8F8F2;">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 开始监听客户端连接，最多可以排队一个连接</span></span>
<span class="line"><span style="color:#F8F8F2;">sock.listen(</span><span style="color:#AE81FF;">1</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 存储所有连接的客户端</span></span>
<span class="line"><span style="color:#F8F8F2;">connections </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> []</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 定义一个 handler 函数，用于处理每个客户端的消息</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">def</span><span style="color:#A6E22E;"> handler</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">c</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">a</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F92672;">    while</span><span style="color:#AE81FF;"> True</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#88846F;">        # 接收客户端发送的数据（最大接收 4098 字节）</span></span>
<span class="line"><span style="color:#F8F8F2;">        data </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> c.recv(</span><span style="color:#AE81FF;">4098</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span></span>
<span class="line"><span style="color:#88846F;">        # 遍历所有连接的客户端，将接收到的数据转发给每个其他客户端</span></span>
<span class="line"><span style="color:#F92672;">        for</span><span style="color:#F8F8F2;"> connection </span><span style="color:#F92672;">in</span><span style="color:#F8F8F2;"> connections:</span></span>
<span class="line"><span style="color:#F92672;">            if</span><span style="color:#F8F8F2;"> connection </span><span style="color:#F92672;">!=</span><span style="color:#F8F8F2;"> c:  </span><span style="color:#88846F;"># 排除自己</span></span>
<span class="line"><span style="color:#F8F8F2;">                connection.send(data)</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span></span>
<span class="line"><span style="color:#88846F;">        # 如果没有数据（客户端关闭连接），退出循环</span></span>
<span class="line"><span style="color:#F92672;">        if</span><span style="color:#F92672;"> not</span><span style="color:#F8F8F2;"> data:</span></span>
<span class="line"><span style="color:#F92672;">            break</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 主循环，等待客户端连接</span></span>
<span class="line"><span style="color:#F92672;">while</span><span style="color:#AE81FF;"> True</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#88846F;">    # 接受客户端连接</span></span>
<span class="line"><span style="color:#F8F8F2;">    c, a </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> sock.accept()</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span></span>
<span class="line"><span style="color:#88846F;">    # 启动一个新线程处理该客户端的消息</span></span>
<span class="line"><span style="color:#F8F8F2;">    cThread </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> threading.Thread(</span><span style="color:#FD971F;font-style:italic;">target</span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;">handler, </span><span style="color:#FD971F;font-style:italic;">args</span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;">(c, a))</span></span>
<span class="line"><span style="color:#F8F8F2;">    cThread.daemon </span><span style="color:#F92672;">=</span><span style="color:#AE81FF;"> True</span><span style="color:#88846F;">  # 设置为守护线程，程序退出时自动结束</span></span>
<span class="line"><span style="color:#F8F8F2;">    cThread.start()</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span></span>
<span class="line"><span style="color:#88846F;">    # 将新连接的客户端添加到连接列表中</span></span>
<span class="line"><span style="color:#F8F8F2;">    connections.append(c)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span></span>
<span class="line"><span style="color:#88846F;">    # 打印当前所有连接的客户端</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(connections)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><!--]--></div><div class="vp-code-tab" id="codetab-133-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">client</div><!--[--><div class="language-python line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="python" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#88846F;"># 导入 socket 和 threading 模块</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> socket</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> threading</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 创建一个 socket 对象，使用 IPv4 和 TCP 协议</span></span>
<span class="line"><span style="color:#F8F8F2;">sock </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> socket.socket(socket.</span><span style="color:#AE81FF;">AF_INET</span><span style="color:#F8F8F2;">, socket.</span><span style="color:#AE81FF;">SOCK_STREAM</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 连接到服务器的 IP 和端口</span></span>
<span class="line"><span style="color:#F8F8F2;">sock.connect((</span><span style="color:#E6DB74;">&#39;127.0.0.1&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#AE81FF;">12345</span><span style="color:#F8F8F2;">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 定义一个发送消息的函数</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">def</span><span style="color:#A6E22E;"> sendMsg</span><span style="color:#F8F8F2;">():</span></span>
<span class="line"><span style="color:#F92672;">    while</span><span style="color:#AE81FF;"> True</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#88846F;">        # 获取用户输入，并将其编码为字节串发送</span></span>
<span class="line"><span style="color:#F8F8F2;">        msg </span><span style="color:#F92672;">=</span><span style="color:#66D9EF;"> input</span><span style="color:#F8F8F2;">().encode()</span></span>
<span class="line"><span style="color:#F8F8F2;">        sock.send(msg)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 启动一个线程负责发送消息</span></span>
<span class="line"><span style="color:#F8F8F2;">iThread </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> threading.Thread(</span><span style="color:#FD971F;font-style:italic;">target</span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;">sendMsg)</span></span>
<span class="line"><span style="color:#F8F8F2;">iThread.daemon </span><span style="color:#F92672;">=</span><span style="color:#AE81FF;"> True</span><span style="color:#88846F;">  # 设置为守护线程</span></span>
<span class="line"><span style="color:#F8F8F2;">iThread.start()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 接收来自服务器的数据并打印</span></span>
<span class="line"><span style="color:#F92672;">while</span><span style="color:#AE81FF;"> True</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#88846F;">    # 接收数据（最大 4098 字节）</span></span>
<span class="line"><span style="color:#F8F8F2;">    data </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> sock.recv(</span><span style="color:#AE81FF;">4098</span><span style="color:#F8F8F2;">).decode()</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span></span>
<span class="line"><span style="color:#88846F;">    # 如果没有数据（服务器关闭连接），退出循环</span></span>
<span class="line"><span style="color:#F92672;">    if</span><span style="color:#F92672;"> not</span><span style="color:#F8F8F2;"> data:</span></span>
<span class="line"><span style="color:#F92672;">        break</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span></span>
<span class="line"><span style="color:#88846F;">    # 打印接收到的数据</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(data)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><!--]--></div><!--]--></div><h3 id="过程详解" tabindex="-1"><a class="header-anchor" href="#过程详解"><span>过程详解</span></a></h3><h4 id="_1-启动服务器-server-py" tabindex="-1"><a class="header-anchor" href="#_1-启动服务器-server-py"><span>1. 启动服务器 (<code>server.py</code>)：</span></a></h4><ol><li><p>打开一个终端窗口。</p></li><li><p>确保你已经在 <code>server.py</code> 文件所在的目录。</p></li><li><p>执行以下命令来运行服务器：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#A6E22E;">python</span><span style="color:#E6DB74;"> server.py</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>服务器应该开始监听客户端连接，等待连接的客户端发送消息。</p></li></ol><h4 id="_2-启动客户端-client-py" tabindex="-1"><a class="header-anchor" href="#_2-启动客户端-client-py"><span>2. 启动客户端 (<code>client.py</code>)：</span></a></h4><p>你需要在多个终端窗口中启动多个客户端，以便测试多用户聊天功能。</p><ul><li><p>打开 <strong>另一个终端窗口</strong>（可以是多个窗口），并确保你在 <code>client.py</code> 文件所在的目录。</p></li><li><p>执行以下命令来启动一个客户端：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#A6E22E;">python</span><span style="color:#E6DB74;"> client.py</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>你可以运行多个客户端实例，只要在每个终端窗口中运行上面的命令，就能模拟多个用户同时连接到服务器。</p></li></ul><h4 id="_3-测试聊天功能" tabindex="-1"><a class="header-anchor" href="#_3-测试聊天功能"><span>3. 测试聊天功能：</span></a></h4><ul><li><strong>客户端输入消息：</strong> 启动客户端后，每个客户端都会提示你输入消息。你可以在每个客户端窗口输入不同的消息，看看消息是否能正确地从一个客户端传递到其他客户端。</li><li><strong>消息广播：</strong> 当你在一个客户端输入消息并按 Enter 键时，服务器会将这条消息转发给所有其他连接的客户端，其他客户端会显示你发送的消息。</li></ul><h4 id="_4-关闭连接" tabindex="-1"><a class="header-anchor" href="#_4-关闭连接"><span>4. 关闭连接：</span></a></h4><ul><li>如果你想关闭某个客户端，只需在该客户端窗口按 <code>Ctrl + C</code> 或关闭该终端窗口即可。</li><li>如果要停止服务器，可以在服务器的终端窗口按 <code>Ctrl + C</code>。</li></ul><h4 id="注意事项" tabindex="-1"><a class="header-anchor" href="#注意事项"><span>注意事项：</span></a></h4><ul><li><strong>端口占用问题：</strong> 如果你在本地运行多个服务器或客户端，确保端口 <code>12345</code> 没有被其他程序占用。如果端口被占用，你可以选择更换端口号，比如 <code>12346</code> 等。</li><li><strong>防火墙/网络问题：</strong> 由于使用的是本地地址 (<code>127.0.0.1</code>)，它应该不受防火墙影响，但如果你要在不同机器上测试，需要确保防火墙设置允许使用该端口。</li></ul><h4 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结：</span></a></h4><ol><li>启动 <code>server.py</code>，它会开始监听。</li><li>启动多个 <code>client.py</code> 实例，输入消息进行聊天。</li><li>观察是否所有客户端都能收到其他客户端发出的消息。</li></ol><h2 id="_5-concurrent-example-2-news-scrapers" tabindex="-1"><a class="header-anchor" href="#_5-concurrent-example-2-news-scrapers"><span>5. Concurrent Example 2: NEWS SCRAPERS</span></a></h2><h3 id="more-about-threads" tabindex="-1"><a class="header-anchor" href="#more-about-threads"><span>More About Threads</span></a></h3><ul><li><p>Chat Servers set up threads which run independently so that messages can be sent and received in any order</p></li><li><p>Threads also allow processes to be run concurrently – at the same time, or near the same time</p></li><li><p>This makes applications faster</p></li></ul><h3 id="news-size" tabindex="-1"><a class="header-anchor" href="#news-size"><span>News size</span></a></h3><ul><li><p>First, we’ll check out and run <a href="http://non-concurrent-example-URLs-timeit.py" target="_blank" rel="noopener noreferrer">non-concurrent-example-URLs-timeit.py</a></p></li><li><p>This goes to news URLs, reports the URL, and prints the size of the data received</p></li><li><p>Note the time taken</p></li><li><p>Code analysis (excluding timeit) over</p></li></ul><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-307-0" aria-selected="true"><a href="http://non-concurrent-example-URLs.py" target="_blank" rel="noopener noreferrer">non-concurrent-example-URLs.py</a></button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-307-1" aria-selected="false"><a href="http://non-concurrent-example-URLs.timeit.py" target="_blank" rel="noopener noreferrer">non-concurrent-example-URLs.timeit.py</a></button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-307-2" aria-selected="false"><a href="http://concurrent-example-URLs.py" target="_blank" rel="noopener noreferrer">concurrent-example-URLs.py</a></button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-307-3" aria-selected="false"><a href="http://concurrent-example-URLs.timeit.py" target="_blank" rel="noopener noreferrer">concurrent-example-URLs.timeit.py</a></button></div><!--[--><div class="vp-code-tab active" id="codetab-307-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title"><a href="http://non-concurrent-example-URLs.py" target="_blank" rel="noopener noreferrer">non-concurrent-example-URLs.py</a></div><!--[--><div class="language-python line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="python" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#88846F;"># 导入 urllib.request 模块，用于处理 URL 请求</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> urllib.request</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 定义一个包含多个 URL 的列表，后续程序会依次访问这些网站</span></span>
<span class="line"><span style="color:#AE81FF;">URLS</span><span style="color:#F92672;"> =</span><span style="color:#F8F8F2;"> [</span><span style="color:#E6DB74;">&#39;http://www.foxnews.com/&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#E6DB74;">        &#39;http://www.cnn.com/&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#E6DB74;">        &#39;http://europe.wsj.com/&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#E6DB74;">        &#39;http://www.bbc.co.uk/&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#E6DB74;">        &#39;http://some-made-up-domain.com/&#39;</span><span style="color:#F8F8F2;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 定义一个函数用于加载指定 URL 的网页内容</span></span>
<span class="line"><span style="color:#88846F;"># 参数 url: 要访问的 URL</span></span>
<span class="line"><span style="color:#88846F;"># 参数 timeout: 设置连接的超时时间，单位是秒</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">def</span><span style="color:#A6E22E;"> load_url</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">url</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">timeout</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#88846F;">    # 使用 urllib.request.urlopen() 打开 URL，timeout 用于指定超时时间</span></span>
<span class="line"><span style="color:#88846F;">    # 使用 with 语句保证请求完成后会自动关闭连接</span></span>
<span class="line"><span style="color:#F92672;">    with</span><span style="color:#F8F8F2;"> urllib.request.urlopen(url, </span><span style="color:#FD971F;font-style:italic;">timeout</span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;">timeout) </span><span style="color:#F92672;">as</span><span style="color:#F8F8F2;"> conn:</span></span>
<span class="line"><span style="color:#88846F;">        # 读取网页内容并返回</span></span>
<span class="line"><span style="color:#F92672;">        return</span><span style="color:#F8F8F2;"> conn.read()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 定义一个函数，展示如何按顺序请求多个 URL（不使用并发）</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">def</span><span style="color:#A6E22E;"> non_concurrent_URLs_example</span><span style="color:#F8F8F2;">():</span></span>
<span class="line"><span style="color:#88846F;">    # 遍历 URLS 列表中的每个 URL</span></span>
<span class="line"><span style="color:#F92672;">    for</span><span style="color:#F8F8F2;"> url </span><span style="color:#F92672;">in</span><span style="color:#AE81FF;"> URLS</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F92672;">        try</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#88846F;">            # 调用 load_url 函数加载 URL，设置 60 秒的超时</span></span>
<span class="line"><span style="color:#F8F8F2;">            data </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> load_url(url, </span><span style="color:#AE81FF;">60</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F92672;">        except</span><span style="color:#66D9EF;font-style:italic;"> Exception</span><span style="color:#F92672;"> as</span><span style="color:#F8F8F2;"> exc:</span></span>
<span class="line"><span style="color:#88846F;">            # 如果发生异常（如连接失败、超时等），打印错误信息</span></span>
<span class="line"><span style="color:#66D9EF;">            print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;</span><span style="color:#AE81FF;">%r</span><span style="color:#E6DB74;"> generated an exception: </span><span style="color:#AE81FF;">%s</span><span style="color:#E6DB74;">&#39;</span><span style="color:#F92672;"> %</span><span style="color:#F8F8F2;"> (url, exc))</span></span>
<span class="line"><span style="color:#F92672;">        else</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#88846F;">            # 如果请求成功，打印网页的大小（以字节为单位）</span></span>
<span class="line"><span style="color:#66D9EF;">            print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;</span><span style="color:#AE81FF;">%r</span><span style="color:#E6DB74;"> page is </span><span style="color:#AE81FF;">%d</span><span style="color:#E6DB74;"> bytes&#39;</span><span style="color:#F92672;"> %</span><span style="color:#F8F8F2;"> (url, </span><span style="color:#66D9EF;">len</span><span style="color:#F8F8F2;">(data)))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 调用 non_concurrent_URLs_example 函数开始请求并输出结果</span></span>
<span class="line"><span style="color:#F8F8F2;">non_concurrent_URLs_example()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><!--]--></div><div class="vp-code-tab" id="codetab-307-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title"><a href="http://non-concurrent-example-URLs.timeit.py" target="_blank" rel="noopener noreferrer">non-concurrent-example-URLs.timeit.py</a></div><!--[--><div class="language-python line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="python" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> timeit  </span><span style="color:#88846F;"># 导入 timeit 模块，用来计时代码执行的时间</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 将需要执行并计时的代码放在三引号之间，作为一个字符串传入 timeit</span></span>
<span class="line"><span style="color:#F8F8F2;">code_to_time </span><span style="color:#F92672;">=</span><span style="color:#E6DB74;"> &quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#E6DB74;"># 导入所需的模块</span></span>
<span class="line"><span style="color:#E6DB74;">import concurrent.futures  # 用于并发编程的线程池模块</span></span>
<span class="line"><span style="color:#E6DB74;">import urllib.request  # 用于处理 HTTP 请求</span></span>
<span class="line"><span style="color:#E6DB74;">import threading  # 用于多线程</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6DB74;"># 定义需要请求的 URL 列表</span></span>
<span class="line"><span style="color:#E6DB74;">URLS = [&#39;http://www.foxnews.com/&#39;,</span></span>
<span class="line"><span style="color:#E6DB74;">        &#39;http://www.cnn.com/&#39;,</span></span>
<span class="line"><span style="color:#E6DB74;">        &#39;http://europe.wsj.com/&#39;,</span></span>
<span class="line"><span style="color:#E6DB74;">        &#39;http://www.bbc.co.uk/&#39;,</span></span>
<span class="line"><span style="color:#E6DB74;">        &#39;http://some-made-up-domain.com/&#39;]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6DB74;"># 定义请求 URL 的函数，设置超时时间</span></span>
<span class="line"><span style="color:#E6DB74;">def load_url(url, timeout):</span></span>
<span class="line"><span style="color:#E6DB74;">    # 使用 urllib.request.urlopen 发送 HTTP 请求并读取内容</span></span>
<span class="line"><span style="color:#E6DB74;">    with urllib.request.urlopen(url, timeout=timeout) as conn:</span></span>
<span class="line"><span style="color:#E6DB74;">        return conn.read()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6DB74;"># 定义一个示例函数，演示如何使用线程池并发请求多个 URL</span></span>
<span class="line"><span style="color:#E6DB74;">def concurrent_URLs_example():</span></span>
<span class="line"><span style="color:#E6DB74;">    # 使用 ThreadPoolExecutor 创建一个最大线程数为 5 的线程池</span></span>
<span class="line"><span style="color:#E6DB74;">    with concurrent.futures.ThreadPoolExecutor(max_workers=5) as executor:</span></span>
<span class="line"><span style="color:#E6DB74;">        # 将 URL 和对应的请求任务提交到线程池，返回一个字典 future_to_url</span></span>
<span class="line"><span style="color:#E6DB74;">        future_to_url = {executor.submit(load_url, url, 60): url for url in URLS}</span></span>
<span class="line"><span style="color:#E6DB74;">        </span></span>
<span class="line"><span style="color:#E6DB74;">        # 使用 as_completed 获取已经完成的任务</span></span>
<span class="line"><span style="color:#E6DB74;">        for future in concurrent.futures.as_completed(future_to_url):</span></span>
<span class="line"><span style="color:#E6DB74;">            url = future_to_url[future]  # 获取当前任务对应的 URL</span></span>
<span class="line"><span style="color:#E6DB74;">            try:</span></span>
<span class="line"><span style="color:#E6DB74;">                # 获取任务结果（即网页内容）</span></span>
<span class="line"><span style="color:#E6DB74;">                data = future.result()</span></span>
<span class="line"><span style="color:#E6DB74;">            except Exception as exc:</span></span>
<span class="line"><span style="color:#E6DB74;">                # 如果请求过程中抛出异常，则打印异常信息</span></span>
<span class="line"><span style="color:#E6DB74;">                print(&#39;</span><span style="color:#AE81FF;">%r</span><span style="color:#E6DB74;"> generated an exception: </span><span style="color:#AE81FF;">%s</span><span style="color:#E6DB74;">&#39; % (url, exc), </span><span style="color:#AE81FF;">\n</span><span style="color:#E6DB74;">)</span></span>
<span class="line"><span style="color:#E6DB74;">            else:</span></span>
<span class="line"><span style="color:#E6DB74;">                # 如果请求成功，打印网页的大小（字节数）</span></span>
<span class="line"><span style="color:#E6DB74;">                print(&#39;</span><span style="color:#AE81FF;">%r</span><span style="color:#E6DB74;"> page is </span><span style="color:#AE81FF;">%d</span><span style="color:#E6DB74;"> bytes&#39; % (url, len(data)),</span><span style="color:#AE81FF;">\n</span><span style="color:#E6DB74;">)</span></span>
<span class="line"><span style="color:#E6DB74;">        print(</span><span style="color:#AE81FF;">\n</span><span style="color:#E6DB74;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6DB74;"># 执行并发请求的示例函数</span></span>
<span class="line"><span style="color:#E6DB74;">concurrent_URLs_example()</span></span>
<span class="line"><span style="color:#E6DB74;">&quot;&quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 使用 timeit.timeit 来计时代码执行的时间</span></span>
<span class="line"><span style="color:#88846F;"># timeit 会执行传入的代码多次，这里设置执行 10 次，最后取平均值</span></span>
<span class="line"><span style="color:#F8F8F2;">elapsed_time </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> timeit.timeit(code_to_time, </span><span style="color:#FD971F;font-style:italic;">number</span><span style="color:#F92672;">=</span><span style="color:#AE81FF;">10</span><span style="color:#F8F8F2;">) </span><span style="color:#F92672;">/</span><span style="color:#AE81FF;"> 10</span><span style="color:#88846F;">  # 计算 10 次执行的平均时间</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 打印每次执行的平均时间（单位为秒）</span></span>
<span class="line"><span style="color:#66D9EF;">print</span><span style="color:#F8F8F2;">(elapsed_time)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><!--]--></div><div class="vp-code-tab" id="codetab-307-2" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title"><a href="http://concurrent-example-URLs.py" target="_blank" rel="noopener noreferrer">concurrent-example-URLs.py</a></div><!--[--><div class="language-python line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="python" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#88846F;"># 导入需要的库</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> concurrent.futures  </span><span style="color:#88846F;"># 用于并发执行任务</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> urllib.request  </span><span style="color:#88846F;"># 用于发送网络请求</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> timeit  </span><span style="color:#88846F;"># 用于计时，虽然在此代码中未被使用</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 预定义一个URL列表</span></span>
<span class="line"><span style="color:#AE81FF;">URLS</span><span style="color:#F92672;"> =</span><span style="color:#F8F8F2;"> [</span><span style="color:#E6DB74;">&#39;http://www.foxnews.com/&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#E6DB74;">        &#39;http://www.cnn.com/&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#E6DB74;">        &#39;http://europe.wsj.com/&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#E6DB74;">        &#39;http://www.bbc.co.uk/&#39;</span><span style="color:#F8F8F2;">,</span></span>
<span class="line"><span style="color:#E6DB74;">        &#39;http://some-made-up-domain.com/&#39;</span><span style="color:#F8F8F2;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 定义一个函数，用于加载指定的URL</span></span>
<span class="line"><span style="color:#88846F;"># 该函数接受两个参数：url（要访问的网址）和timeout（请求的超时时间）</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">def</span><span style="color:#A6E22E;"> load_url</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">url</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">timeout</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#88846F;">    # 使用urllib.request.urlopen()方法打开指定的URL</span></span>
<span class="line"><span style="color:#88846F;">    # 其中timeout表示连接超时的时间（单位为秒）</span></span>
<span class="line"><span style="color:#F92672;">    with</span><span style="color:#F8F8F2;"> urllib.request.urlopen(url, </span><span style="color:#FD971F;font-style:italic;">timeout</span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;">timeout) </span><span style="color:#F92672;">as</span><span style="color:#F8F8F2;"> conn:</span></span>
<span class="line"><span style="color:#88846F;">        # 返回页面的内容（以字节形式）</span></span>
<span class="line"><span style="color:#F92672;">        return</span><span style="color:#F8F8F2;"> conn.read()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 定义一个函数，展示如何并发地加载多个URL</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">def</span><span style="color:#A6E22E;"> concurrent_URLs_example</span><span style="color:#F8F8F2;">():</span></span>
<span class="line"><span style="color:#88846F;">    # 使用concurrent.futures.ThreadPoolExecutor创建一个线程池执行器</span></span>
<span class="line"><span style="color:#88846F;">    # max_workers=5表示最多允许同时执行5个线程</span></span>
<span class="line"><span style="color:#F92672;">    with</span><span style="color:#F8F8F2;"> concurrent.futures.ThreadPoolExecutor(</span><span style="color:#FD971F;font-style:italic;">max_workers</span><span style="color:#F92672;">=</span><span style="color:#AE81FF;">5</span><span style="color:#F8F8F2;">) </span><span style="color:#F92672;">as</span><span style="color:#F8F8F2;"> executor:</span></span>
<span class="line"><span style="color:#88846F;">        # 创建一个字典future_to_url，将每个URL任务与线程池中的future对象关联</span></span>
<span class="line"><span style="color:#88846F;">        # executor.submit(load_url, url, 60)会将load_url函数及其参数提交到线程池中</span></span>
<span class="line"><span style="color:#88846F;">        # 60是请求的超时时间</span></span>
<span class="line"><span style="color:#F8F8F2;">        future_to_url </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> {executor.submit(load_url, url, </span><span style="color:#AE81FF;">60</span><span style="color:#F8F8F2;">): url </span><span style="color:#F92672;">for</span><span style="color:#F8F8F2;"> url </span><span style="color:#F92672;">in</span><span style="color:#AE81FF;"> URLS</span><span style="color:#F8F8F2;">}</span></span>
<span class="line"><span style="color:#F8F8F2;">        </span></span>
<span class="line"><span style="color:#88846F;">        # 使用concurrent.futures.as_completed()方法来遍历所有任务的结果</span></span>
<span class="line"><span style="color:#88846F;">        # 该方法会按任务完成的顺序返回future对象</span></span>
<span class="line"><span style="color:#F92672;">        for</span><span style="color:#F8F8F2;"> future </span><span style="color:#F92672;">in</span><span style="color:#F8F8F2;"> concurrent.futures.as_completed(future_to_url):</span></span>
<span class="line"><span style="color:#88846F;">            # 获取当前future对象对应的URL</span></span>
<span class="line"><span style="color:#F8F8F2;">            url </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> future_to_url[future]</span></span>
<span class="line"><span style="color:#F92672;">            try</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#88846F;">                # 调用future.result()获取任务的返回结果（即网页内容）</span></span>
<span class="line"><span style="color:#F8F8F2;">                data </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> future.result()</span></span>
<span class="line"><span style="color:#F92672;">            except</span><span style="color:#66D9EF;font-style:italic;"> Exception</span><span style="color:#F92672;"> as</span><span style="color:#F8F8F2;"> exc:</span></span>
<span class="line"><span style="color:#88846F;">                # 如果任务执行过程中发生异常，打印异常信息</span></span>
<span class="line"><span style="color:#66D9EF;">                print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;</span><span style="color:#AE81FF;">%r</span><span style="color:#E6DB74;"> generated an exception: </span><span style="color:#AE81FF;">%s</span><span style="color:#E6DB74;">&#39;</span><span style="color:#F92672;"> %</span><span style="color:#F8F8F2;"> (url, exc))</span></span>
<span class="line"><span style="color:#F92672;">            else</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#88846F;">                # 如果任务执行成功，打印URL及其页面的字节长度</span></span>
<span class="line"><span style="color:#66D9EF;">                print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;</span><span style="color:#AE81FF;">%r</span><span style="color:#E6DB74;"> page is </span><span style="color:#AE81FF;">%d</span><span style="color:#E6DB74;"> bytes&#39;</span><span style="color:#F92672;"> %</span><span style="color:#F8F8F2;"> (url, </span><span style="color:#66D9EF;">len</span><span style="color:#F8F8F2;">(data)))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 调用concurrent_URLs_example函数来执行并发任务</span></span>
<span class="line"><span style="color:#F8F8F2;">concurrent_URLs_example()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><!--]--></div><div class="vp-code-tab" id="codetab-307-3" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title"><a href="http://concurrent-example-URLs.timeit.py" target="_blank" rel="noopener noreferrer">concurrent-example-URLs.timeit.py</a></div><!--[--><div class="language-python line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="python" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> timeit</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2;">code_to_time </span><span style="color:#F92672;">=</span><span style="color:#E6DB74;"> &quot;&quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6DB74;">import concurrent.futures</span></span>
<span class="line"><span style="color:#E6DB74;">import urllib.request</span></span>
<span class="line"><span style="color:#E6DB74;">import threading</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E6DB74;">URLS = [&#39;http://www.foxnews.com/&#39;,</span></span>
<span class="line"><span style="color:#E6DB74;">        &#39;http://www.cnn.com/&#39;,</span></span>
<span class="line"><span style="color:#E6DB74;">        &#39;http://europe.wsj.com/&#39;,</span></span>
<span class="line"><span style="color:#E6DB74;">        &#39;http://www.bbc.co.uk/&#39;,</span></span>
<span class="line"><span style="color:#E6DB74;">        &#39;http://some-made-up-domain.com/&#39;]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6DB74;">def load_url(url, timeout):</span></span>
<span class="line"><span style="color:#E6DB74;">    with urllib.request.urlopen(url, timeout=timeout) as conn:</span></span>
<span class="line"><span style="color:#E6DB74;">        return conn.read()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6DB74;">def concurrent_URLs_example():</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6DB74;">    with concurrent.futures.ThreadPoolExecutor(max_workers=5) as executor:</span></span>
<span class="line"><span style="color:#E6DB74;">        future_to_url = {executor.submit(load_url, url, 60): url for url in URLS}</span></span>
<span class="line"><span style="color:#E6DB74;">        for future in concurrent.futures.as_completed(future_to_url):</span></span>
<span class="line"><span style="color:#E6DB74;">            url = future_to_url[future]</span></span>
<span class="line"><span style="color:#E6DB74;">            try:</span></span>
<span class="line"><span style="color:#E6DB74;">                data = future.result()</span></span>
<span class="line"><span style="color:#E6DB74;">            except Exception as exc:</span></span>
<span class="line"><span style="color:#E6DB74;">                print(&#39;</span><span style="color:#AE81FF;">%r</span><span style="color:#E6DB74;"> generated an exception: </span><span style="color:#AE81FF;">%s</span><span style="color:#E6DB74;">&#39; % (url, exc), </span><span style="color:#AE81FF;">\n</span><span style="color:#E6DB74;">)</span></span>
<span class="line"><span style="color:#E6DB74;">            else:</span></span>
<span class="line"><span style="color:#E6DB74;">                print(&#39;</span><span style="color:#AE81FF;">%r</span><span style="color:#E6DB74;"> page is </span><span style="color:#AE81FF;">%d</span><span style="color:#E6DB74;"> bytes&#39; % (url, len(data)),</span><span style="color:#AE81FF;">\n</span><span style="color:#E6DB74;">)</span></span>
<span class="line"><span style="color:#E6DB74;">        print(</span><span style="color:#AE81FF;">\n</span><span style="color:#E6DB74;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6DB74;">concurrent_URLs_example()</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E6DB74;">&quot;&quot;&quot;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;">#timeit requires a string so code to be timed appears in &quot;&quot;&quot;...&quot;&quot;&quot; like a docstring</span></span>
<span class="line"><span style="color:#F8F8F2;">elapsed_time </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> timeit.timeit(code_to_time, </span><span style="color:#FD971F;font-style:italic;">number</span><span style="color:#F92672;">=</span><span style="color:#AE81FF;">10</span><span style="color:#F8F8F2;">)</span><span style="color:#F92672;">/</span><span style="color:#AE81FF;">10</span><span style="color:#88846F;">            #get the average of 10 cycles</span></span>
<span class="line"><span style="color:#66D9EF;">print</span><span style="color:#F8F8F2;">(elapsed_time)                                               </span><span style="color:#88846F;">#time printed in seconds</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><!--]--></div><!--]--></div><h2 id="_6-理解的例子" tabindex="-1"><a class="header-anchor" href="#_6-理解的例子"><span>6. 理解的例子</span></a></h2><div class="language-python line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="python" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> time</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> threading</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">def</span><span style="color:#A6E22E;"> start</span><span style="color:#F8F8F2;">():</span></span>
<span class="line"><span style="color:#F92672;">    for</span><span style="color:#F8F8F2;"> i </span><span style="color:#F92672;">in</span><span style="color:#66D9EF;"> range</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">1000000</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">        i </span><span style="color:#F92672;">+=</span><span style="color:#AE81FF;"> 1</span></span>
<span class="line"><span style="color:#F92672;">    return</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># </span><span style="color:#F92672;">TODO</span><span style="color:#88846F;">: 0.20663189888000488</span></span>
<span class="line"><span style="color:#88846F;"># 不使用任何线程（裸着来）</span></span>
<span class="line"><span style="color:#88846F;"># def main():</span></span>
<span class="line"><span style="color:#88846F;">#     start_time = time.time()</span></span>
<span class="line"><span style="color:#88846F;">#     for i in range(10):</span></span>
<span class="line"><span style="color:#88846F;">#         start()</span></span>
<span class="line"><span style="color:#88846F;">#     print(time.time() - start_time)</span></span>
<span class="line"><span style="color:#88846F;">#</span></span>
<span class="line"><span style="color:#88846F;">#</span></span>
<span class="line"><span style="color:#88846F;"># if __name__ == &#39;__main__&#39;:</span></span>
<span class="line"><span style="color:#88846F;">#     main()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">def</span><span style="color:#A6E22E;"> main</span><span style="color:#F8F8F2;">():</span></span>
<span class="line"><span style="color:#F8F8F2;">    start_time </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> time.time()</span></span>
<span class="line"><span style="color:#F8F8F2;">    thread_name_time </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> {}  </span><span style="color:#88846F;"># 我们先创建个字典 (thread_name_time) 用来来存储我们每个线程的名称与对应的时间</span></span>
<span class="line"><span style="color:#F92672;">    for</span><span style="color:#F8F8F2;"> i </span><span style="color:#F92672;">in</span><span style="color:#66D9EF;"> range</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">10</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#88846F;">        # 也就是说，每个线程顺序执行</span></span>
<span class="line"><span style="color:#F8F8F2;">        thread </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> threading.Thread(</span><span style="color:#FD971F;font-style:italic;">target</span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;">start)  </span><span style="color:#88846F;"># target=写你要多线程运行的函数，不需要加括号</span></span>
<span class="line"><span style="color:#F8F8F2;">        thread.start()  </span><span style="color:#88846F;"># 上一行开启了线程，这一行是开始运行（也就是开启个 run）</span></span>
<span class="line"><span style="color:#F8F8F2;">        thread_name_time[i] </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> thread  </span><span style="color:#88846F;"># 添加数据到我们的字典当中，这里为什么要用i做key？这是因为这样方便我们join</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">    for</span><span style="color:#F8F8F2;"> i </span><span style="color:#F92672;">in</span><span style="color:#66D9EF;"> range</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">10</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">        thread_name_time[i].join()</span></span>
<span class="line"><span style="color:#88846F;">        # 	join() 等待线程执行完毕（也就是说卡在这里，这个线程执行完才会执行下一步）</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(time.time() </span><span style="color:#F92672;">-</span><span style="color:#F8F8F2;"> start_time)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">if</span><span style="color:#F8F8F2;"> __name__ </span><span style="color:#F92672;">==</span><span style="color:#E6DB74;"> &#39;__main__&#39;</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">    main()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h2 id="_7-try-except" tabindex="-1"><a class="header-anchor" href="#_7-try-except"><span>7. try except</span></a></h2><p>对于一个需要输入的代码，输入一个整数来判断是奇数还是偶数：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F8F8F2;">user_input </span><span style="color:#F92672;">=</span><span style="color:#66D9EF;"> input</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;:&gt;&gt;&gt;&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F92672;">if</span><span style="color:#F8F8F2;"> user_input.isdigit():</span></span>
<span class="line"><span style="color:#F92672;">    if</span><span style="color:#66D9EF;font-style:italic;"> int</span><span style="color:#F8F8F2;">(user_input) </span><span style="color:#F92672;">%</span><span style="color:#AE81FF;"> 2</span><span style="color:#F92672;"> ==</span><span style="color:#AE81FF;"> 0</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#66D9EF;">        print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;even&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F92672;">    else</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#66D9EF;">        print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;odd&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F92672;">else</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;需要正常数字&#39;</span><span style="color:#F8F8F2;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到，我们需要一个条件判断来排除输入不是整数的情况，让程序不至于报错。</p><p>新语法可以使得这个功能更简洁清晰：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F92672;">try</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#88846F;">    # 正常执行的代码</span></span>
<span class="line"><span style="color:#F92672;">    pass</span></span>
<span class="line"><span style="color:#F92672;">except</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#88846F;">    # 出现错误的代码</span></span>
<span class="line"><span style="color:#F92672;">    pass</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="基础实现" tabindex="-1"><a class="header-anchor" href="#基础实现"><span>基础实现</span></a></h3><p>对于上述功能的代码，我们可以这么写：</p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-348-0" aria-selected="true"></button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-348-1" aria-selected="false">+ 条件</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-348-2" aria-selected="false">+ 条件s</button></div><!--[--><div class="vp-tab active" id="tab-348-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title"></div><!--[--><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F8F8F2;">user_input </span><span style="color:#F92672;">=</span><span style="color:#66D9EF;"> input</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;:&gt;&gt;&gt;&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F92672;">try</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">    user_input </span><span style="color:#F92672;">=</span><span style="color:#66D9EF;font-style:italic;"> int</span><span style="color:#F8F8F2;">(user_input)</span></span>
<span class="line"><span style="color:#F92672;">    if</span><span style="color:#F8F8F2;"> user_input </span><span style="color:#F92672;">%</span><span style="color:#AE81FF;"> 2</span><span style="color:#F92672;"> ==</span><span style="color:#AE81FF;"> 0</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#66D9EF;">        print</span><span style="color:#F8F8F2;">(even)</span></span>
<span class="line"><span style="color:#F92672;">    else</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#66D9EF;">        print</span><span style="color:#F8F8F2;">(odd)</span></span>
<span class="line"><span style="color:#F92672;">except</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;Invalid&#39;</span><span style="color:#F8F8F2;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-tab" id="tab-348-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">+ 条件</div><!--[--><p>当然，except 后面还可以跟条件。什么样的条件？—— <strong>报错类型。</strong> 就是如果代码不是 except 后面跟的报错类型，就不会执行 except 里面的命令。</p><div class="language-python line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="python" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F8F8F2;">user_input </span><span style="color:#F92672;">=</span><span style="color:#66D9EF;"> input</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;:&gt;&gt;&gt;&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F92672;">try</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">    user_input </span><span style="color:#F92672;">=</span><span style="color:#66D9EF;font-style:italic;"> int</span><span style="color:#F8F8F2;">(user_input)</span></span>
<span class="line"><span style="color:#F92672;">    if</span><span style="color:#F8F8F2;"> user_input </span><span style="color:#F92672;">%</span><span style="color:#AE81FF;"> 2</span><span style="color:#F92672;"> ==</span><span style="color:#AE81FF;"> 0</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#66D9EF;">        print</span><span style="color:#F8F8F2;">(even)</span></span>
<span class="line"><span style="color:#F92672;">    else</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#66D9EF;">        print</span><span style="color:#F8F8F2;">(odd)</span></span>
<span class="line"><span style="color:#F92672;">except</span><span style="color:#66D9EF;font-style:italic;"> TypeError</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;Invalid&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span></span>
<span class="line"><span style="color:#88846F;"># output</span></span>
<span class="line"><span style="color:#F8F8F2;">:</span><span style="color:#F92672;">&gt;&gt;&gt;</span><span style="color:#F8F8F2;">a</span></span>
<span class="line"><span style="color:#F8F8F2;">Traceback (most recent call last):</span></span>
<span class="line"><span style="color:#F8F8F2;">  File </span><span style="color:#E6DB74;">&quot;D:</span><span style="color:#AE81FF;">\603</span><span style="color:#E6DB74;">\pythonProject1\.venv\Scripts\demo.py&quot;</span><span style="color:#F8F8F2;">, line </span><span style="color:#AE81FF;">3</span><span style="color:#F8F8F2;">, </span><span style="color:#F92672;">in</span><span style="color:#F92672;"> &lt;</span><span style="color:#F8F8F2;">module</span><span style="color:#F92672;">&gt;</span></span>
<span class="line"><span style="color:#F8F8F2;">    user_input </span><span style="color:#F92672;">=</span><span style="color:#66D9EF;font-style:italic;"> int</span><span style="color:#F8F8F2;">(user_input)</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">ValueError</span><span style="color:#F8F8F2;">: invalid literal </span><span style="color:#F92672;">for</span><span style="color:#66D9EF;font-style:italic;"> int</span><span style="color:#F8F8F2;">() </span><span style="color:#F92672;">with</span><span style="color:#F8F8F2;"> base </span><span style="color:#AE81FF;">10</span><span style="color:#F8F8F2;">: </span><span style="color:#E6DB74;">&#39;a&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><p>这里的报错属于 <code>ValueError</code> ，于是 except 后接 <code>TypeError</code> 会不执行 except 后面的命令，报错。</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F8F8F2;">user_input </span><span style="color:#F92672;">=</span><span style="color:#66D9EF;"> input</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;:&gt;&gt;&gt;&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F92672;">try</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">    user_input </span><span style="color:#F92672;">=</span><span style="color:#66D9EF;font-style:italic;"> int</span><span style="color:#F8F8F2;">(user_input)</span></span>
<span class="line"><span style="color:#F92672;">    if</span><span style="color:#F8F8F2;"> user_input </span><span style="color:#F92672;">%</span><span style="color:#AE81FF;"> 2</span><span style="color:#F92672;"> ==</span><span style="color:#AE81FF;"> 0</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#66D9EF;">        print</span><span style="color:#F8F8F2;">(even)</span></span>
<span class="line"><span style="color:#F92672;">    else</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#66D9EF;">        print</span><span style="color:#F8F8F2;">(odd)</span></span>
<span class="line"><span style="color:#F92672;">except</span><span style="color:#66D9EF;font-style:italic;"> ValueError</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;Invalid&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span></span>
<span class="line"><span style="color:#88846F;"># output</span></span>
<span class="line"><span style="color:#F8F8F2;">:</span><span style="color:#F92672;">&gt;&gt;&gt;</span><span style="color:#F8F8F2;">a</span></span>
<span class="line"><span style="color:#F8F8F2;">Invalid</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-tab" id="tab-348-2" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">+ 条件s</div><!--[--><p>当然，一个 except 可以有多个条件，也可以有多个 except</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F8F8F2;">user_input </span><span style="color:#F92672;">=</span><span style="color:#66D9EF;"> input</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;:&gt;&gt;&gt;&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F92672;">try</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">    user_input </span><span style="color:#F92672;">=</span><span style="color:#66D9EF;font-style:italic;"> int</span><span style="color:#F8F8F2;">(user_input)</span></span>
<span class="line"><span style="color:#F92672;">    if</span><span style="color:#F8F8F2;"> user_input </span><span style="color:#F92672;">%</span><span style="color:#AE81FF;"> 2</span><span style="color:#F92672;"> ==</span><span style="color:#AE81FF;"> 0</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#66D9EF;">        print</span><span style="color:#F8F8F2;">(even)</span></span>
<span class="line"><span style="color:#F92672;">    else</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#66D9EF;">        print</span><span style="color:#F8F8F2;">(odd)</span></span>
<span class="line"><span style="color:#F92672;">except</span><span style="color:#F8F8F2;"> (</span><span style="color:#66D9EF;font-style:italic;">ValueError</span><span style="color:#F8F8F2;">,</span><span style="color:#66D9EF;font-style:italic;">TypeError</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;Invalid&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">except</span><span style="color:#66D9EF;font-style:italic;"> KeyboardInterrupt</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;Interrupted&#39;</span><span style="color:#F8F8F2;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><h3 id="finally" tabindex="-1"><a class="header-anchor" href="#finally"><span>finally</span></a></h3><div class="language-python line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="python" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F8F8F2;">user_input </span><span style="color:#F92672;">=</span><span style="color:#66D9EF;"> input</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;:&gt;&gt;&gt;&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F92672;">try</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">    user_input </span><span style="color:#F92672;">=</span><span style="color:#66D9EF;font-style:italic;"> int</span><span style="color:#F8F8F2;">(user_input)</span></span>
<span class="line"><span style="color:#F92672;">    if</span><span style="color:#F8F8F2;"> user_input </span><span style="color:#F92672;">%</span><span style="color:#AE81FF;"> 2</span><span style="color:#F92672;"> ==</span><span style="color:#AE81FF;"> 0</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#66D9EF;">        print</span><span style="color:#F8F8F2;">(even)</span></span>
<span class="line"><span style="color:#F92672;">    else</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#66D9EF;">        print</span><span style="color:#F8F8F2;">(odd)</span></span>
<span class="line"><span style="color:#F92672;">except</span><span style="color:#F8F8F2;"> (</span><span style="color:#66D9EF;font-style:italic;">ValueError</span><span style="color:#F8F8F2;">,</span><span style="color:#66D9EF;font-style:italic;">TypeError</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;Invalid&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F92672;">finally</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;a&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span></span>
<span class="line"><span style="color:#88846F;">#output</span></span>
<span class="line"><span style="color:#F8F8F2;">:</span><span style="color:#F92672;">&gt;&gt;&gt;</span><span style="color:#F8F8F2;">h</span></span>
<span class="line"><span style="color:#F8F8F2;">Invalid</span></span>
<span class="line"><span style="color:#F8F8F2;">a</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><p>无论发生什么，代码<mark>最后</mark>都会执行 finally。finally 不能单独存在，必须与 try except 搭配使用。</p><h2 id="_8-计算密集型和io密集型" tabindex="-1"><a class="header-anchor" href="#_8-计算密集型和io密集型"><span>8. 计算密集型和IO密集型</span></a></h2><img src="/assets/3d4d434a30e9e596f43d19d6da20e17-CiAzG94e.png" alt="3d4d434a30e9e596f43d19d6da20e17" style="zoom:33%;"><blockquote><p>BIOS: B: Base; I: Input; O: Output; S: System</p></blockquote><p>也就是你电脑开机的时候就会启动的。</p><ol><li><strong>计算密集型</strong></li></ol><blockquote><p>在上面的时候，我们开启了两个线程，如果这两个线程要同时执行，那同一时期 CPU 上只有一个线程在执行。 那从上图可知，那这两个线程就需要频繁的在上下文切换。 Ps：我们这个绿色表示我们这个线程正在执行，红色代表阻塞。 所以，我们可以明显的观察到，线程的上下文切换也是需要消耗资源的（时间-ms）不断的归还和拿取 GIL 等，切换上下文。明显造成很大的资源浪费。</p></blockquote><ol start="2"><li><strong>IO密集型</strong></li></ol><blockquote><p>我们现在假设，有个服务器程序（Socket）也就是我们新开的一个程序（也就是我们网络爬虫的最底层）开始爬取目标网页了，我们那个网页呢，有两个线程同时运行，我们线程二已经请求成功开始运行了，也就是上图的 （Thread 2）绿色一条路过去。 而我们的线程一（Thread 1）- Datagram（这里它开启了一个 UDP），然后等待数据建立（也就是等待哪些 HTML、CSS 等数据返回）也就是说，在 Ready to receive（recvfrom） 之间都是准备阶段。这样就是有一段时间一直阻塞，而我们的线程二可以一直无停歇也不用切换上下文就一直在运行。这样的 IO 密集型就有很大的好处。</p></blockquote><p>这里我们需要注意的是，我们的多线程是运行在 IO 密集型上的，我们得区分清楚。</p><p>还有就是，资源等待，比如有时候我们使用浏览器发起了一个 Get 请求，那浏览器图标上面在转圈圈的时候就是我们请求资源等待的时间，（也就是图上面的 Datagram 到 Ready to receive ）数据建立到数据接收（就是转圈圈的时间）。我们完全就不需要执行它，就让它等待就好。这个时候让另一个线程去执行就好</p><h2 id="_9-线程" tabindex="-1"><a class="header-anchor" href="#_9-线程"><span>9. 线程</span></a></h2><h3 id="非守护线程" tabindex="-1"><a class="header-anchor" href="#非守护线程"><span>非守护线程</span></a></h3><div class="language-python line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="python" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> threading, time</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">def</span><span style="color:#A6E22E;"> start</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">num</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    time.sleep(num)</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(threading.current_thread().name) </span><span style="color:#88846F;"># 当前线程名称</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(threading.current_thread().is_alive()) </span><span style="color:#88846F;"># 当前线程状态</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(threading.current_thread().ident) </span><span style="color:#88846F;"># 当前线程的编号</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;start&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#88846F;"># 要使用多线程哪个函数&gt;&gt;&gt;target=函数,name=给这个多线程取个名字</span></span>
<span class="line"><span style="color:#88846F;"># 如果你不起一个名字的话，那那它会自己去起一个名字的（pid）也就是个 ident</span></span>
<span class="line"><span style="color:#88846F;"># 类似声明</span></span>
<span class="line"><span style="color:#F8F8F2;">thread </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> threading.Thread(</span><span style="color:#FD971F;font-style:italic;">target</span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;">start,</span><span style="color:#FD971F;font-style:italic;">name</span><span style="color:#F92672;">=</span><span style="color:#E6DB74;">&#39;my first thread&#39;</span><span style="color:#F8F8F2;">,</span><span style="color:#FD971F;font-style:italic;">args</span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">1</span><span style="color:#F8F8F2;">,))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 每个线程写完你不start()的话，就类似只是声明</span></span>
<span class="line"><span style="color:#F8F8F2;">thread.start()</span></span>
<span class="line"><span style="color:#66D9EF;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;stop&#39;</span><span style="color:#F8F8F2;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><div class="hint-container info"><p class="hint-container-title">相关信息</p><p>由上图可知，声明为线程函数的函数也可以有参数，具体传入参数的方法：<code>args = # 元组</code>，有几个参数元组里传入多少个参数。</p></div><p>输出：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F8F8F2;">start</span></span>
<span class="line"><span style="color:#F8F8F2;">stop</span></span>
<span class="line"><span style="color:#F8F8F2;">my first thread</span></span>
<span class="line"><span style="color:#AE81FF;">True</span></span>
<span class="line"><span style="color:#AE81FF;">22268</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container important"><p class="hint-container-title">重要</p><p>由输出可知，这个线程函数是在主线程之后才开始执行的。这种函数==<strong>非守护线程</strong>==。</p></div><h3 id="join" tabindex="-1"><a class="header-anchor" href="#join"><span>.join()</span></a></h3><div class="language-python line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="python" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> threading, time</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">def</span><span style="color:#A6E22E;"> target</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">second</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">f</span><span style="color:#E6DB74;">&quot;Treading</span><span style="color:#AE81FF;">{</span><span style="color:#F8F8F2;">threading.current_thread().name</span><span style="color:#AE81FF;">}</span><span style="color:#E6DB74;"> is running&quot;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">f</span><span style="color:#E6DB74;">&quot;Treading</span><span style="color:#AE81FF;">{</span><span style="color:#F8F8F2;">threading.current_thread().name</span><span style="color:#AE81FF;">}</span><span style="color:#E6DB74;"> sleep </span><span style="color:#AE81FF;">{</span><span style="color:#F8F8F2;">second</span><span style="color:#AE81FF;">}</span><span style="color:#E6DB74;">s&quot;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    time.sleep(second)</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">f</span><span style="color:#E6DB74;">&quot;Treading</span><span style="color:#AE81FF;">{</span><span style="color:#F8F8F2;">threading.current_thread()</span><span style="color:#AE81FF;">}</span><span style="color:#E6DB74;"> ended&quot;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">f</span><span style="color:#E6DB74;">&quot;Treading</span><span style="color:#AE81FF;">{</span><span style="color:#F8F8F2;">threading.current_thread().name</span><span style="color:#AE81FF;">}</span><span style="color:#E6DB74;"> is running&quot;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">for</span><span style="color:#F8F8F2;"> i </span><span style="color:#F92672;">in</span><span style="color:#F8F8F2;"> [</span><span style="color:#AE81FF;">1</span><span style="color:#F8F8F2;">, </span><span style="color:#AE81FF;">5</span><span style="color:#F8F8F2;">]:</span></span>
<span class="line"><span style="color:#F8F8F2;">    t </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> threading.Thread(</span><span style="color:#FD971F;font-style:italic;">target</span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;">target, </span><span style="color:#FD971F;font-style:italic;">args</span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;">[i])</span></span>
<span class="line"><span style="color:#F8F8F2;">    t.start()</span></span>
<span class="line"><span style="color:#F8F8F2;">    t.join()</span></span>
<span class="line"><span style="color:#66D9EF;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">f</span><span style="color:#E6DB74;">&quot;Treading</span><span style="color:#AE81FF;">{</span><span style="color:#F8F8F2;">threading.current_thread().name</span><span style="color:#AE81FF;">}</span><span style="color:#E6DB74;"> is ended&quot;</span><span style="color:#F8F8F2;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><p>输出：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F8F8F2;">TreadingMainThread </span><span style="color:#F92672;">is</span><span style="color:#F8F8F2;"> running</span></span>
<span class="line"><span style="color:#F8F8F2;">TreadingThread</span><span style="color:#F92672;">-</span><span style="color:#AE81FF;">1</span><span style="color:#F8F8F2;"> (target) </span><span style="color:#F92672;">is</span><span style="color:#F8F8F2;"> running</span></span>
<span class="line"><span style="color:#F8F8F2;">TreadingThread</span><span style="color:#F92672;">-</span><span style="color:#AE81FF;">1</span><span style="color:#F8F8F2;"> (target) sleep </span><span style="color:#F44747;">1s</span></span>
<span class="line"><span style="color:#F8F8F2;">Treading</span><span style="color:#F92672;">&lt;</span><span style="color:#F8F8F2;">Thread(Thread</span><span style="color:#F92672;">-</span><span style="color:#AE81FF;">1</span><span style="color:#F8F8F2;"> (target), started </span><span style="color:#AE81FF;">22892</span><span style="color:#F8F8F2;">)</span><span style="color:#F92672;">&gt;</span><span style="color:#F8F8F2;"> ended</span></span>
<span class="line"><span style="color:#F8F8F2;">TreadingThread</span><span style="color:#F92672;">-</span><span style="color:#AE81FF;">2</span><span style="color:#F8F8F2;"> (target) </span><span style="color:#F92672;">is</span><span style="color:#F8F8F2;"> running</span></span>
<span class="line"><span style="color:#F8F8F2;">TreadingThread</span><span style="color:#F92672;">-</span><span style="color:#AE81FF;">2</span><span style="color:#F8F8F2;"> (target) sleep </span><span style="color:#F44747;">5s</span></span>
<span class="line"><span style="color:#F8F8F2;">Treading</span><span style="color:#F92672;">&lt;</span><span style="color:#F8F8F2;">Thread(Thread</span><span style="color:#F92672;">-</span><span style="color:#AE81FF;">2</span><span style="color:#F8F8F2;"> (target), started </span><span style="color:#AE81FF;">20580</span><span style="color:#F8F8F2;">)</span><span style="color:#F92672;">&gt;</span><span style="color:#F8F8F2;"> ended</span></span>
<span class="line"><span style="color:#F8F8F2;">TreadingMainThread </span><span style="color:#F92672;">is</span><span style="color:#F8F8F2;"> ended</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container important"><p class="hint-container-title">重要</p><p>在调用线程函数之后加 <code>.join()</code>，这样能保证主线程在子线程结束之后结束。</p></div><p>::: detail</p><p>可以对比看一下不加第15行的代码的输出：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F8F8F2;">TreadingMainThread </span><span style="color:#F92672;">is</span><span style="color:#F8F8F2;"> running</span></span>
<span class="line"><span style="color:#F8F8F2;">TreadingThread</span><span style="color:#F92672;">-</span><span style="color:#AE81FF;">1</span><span style="color:#F8F8F2;"> (target) </span><span style="color:#F92672;">is</span><span style="color:#F8F8F2;"> running</span></span>
<span class="line"><span style="color:#F8F8F2;">TreadingThread</span><span style="color:#F92672;">-</span><span style="color:#AE81FF;">1</span><span style="color:#F8F8F2;"> (target) sleep </span><span style="color:#F44747;">1s</span></span>
<span class="line"><span style="color:#F8F8F2;">TreadingThread</span><span style="color:#F92672;">-</span><span style="color:#AE81FF;">2</span><span style="color:#F8F8F2;"> (target) </span><span style="color:#F92672;">is</span><span style="color:#F8F8F2;"> running</span></span>
<span class="line"><span style="color:#F8F8F2;">TreadingThread</span><span style="color:#F92672;">-</span><span style="color:#AE81FF;">2</span><span style="color:#F8F8F2;"> (target) sleep </span><span style="color:#F44747;">5s</span></span>
<span class="line"><span style="color:#F8F8F2;">TreadingMainThread </span><span style="color:#F92672;">is</span><span style="color:#F8F8F2;"> ended</span></span>
<span class="line"><span style="color:#F8F8F2;">Treading</span><span style="color:#F92672;">&lt;</span><span style="color:#F8F8F2;">Thread(Thread</span><span style="color:#F92672;">-</span><span style="color:#AE81FF;">1</span><span style="color:#F8F8F2;"> (target), started </span><span style="color:#AE81FF;">18856</span><span style="color:#F8F8F2;">)</span><span style="color:#F92672;">&gt;</span><span style="color:#F8F8F2;"> ended</span></span>
<span class="line"><span style="color:#F8F8F2;">Treading</span><span style="color:#F92672;">&lt;</span><span style="color:#F8F8F2;">Thread(Thread</span><span style="color:#F92672;">-</span><span style="color:#AE81FF;">2</span><span style="color:#F8F8F2;"> (target), started </span><span style="color:#AE81FF;">23740</span><span style="color:#F8F8F2;">)</span><span style="color:#F92672;">&gt;</span><span style="color:#F8F8F2;"> ended</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在这里我们首先声明了一个方法，叫作 target，它接收一个参数为 second，通过方法的实现可以发现，这个方法其实就是执行了一个 <code>time.sleep</code> 休眠操作，second 参数就是休眠秒数，其前后都 print了一些内容，其中线程的名字我们通过 <code>threading.current_thread().name</code> 来获取出来，如果是主线程的话，其值就是 <code>MainThread</code>，如果是子线程的话，其值就是 Thread-*。</p><p>然后我们通过 <code>Thead</code>类新建了两个线程，target参数就是刚才我们所定义的方法名，<code>args</code>以列表的形式传递。两次循环中，这里 i 分别就是 1 和 5，这样两个线程就分别休眠 1 秒和 5 秒，声明完成之后，我们调用 start 方法即可开始线程的运行。</p><p>观察结果我们可以发现，这里一共产生了三个线程，分别是主线程 MainThread和两个子线程 Thread-1、Thread-2。另外我们观察到，主线程首先运行结束，紧接着 Thread-1、Thread-2 才接连运行结束，分别间隔了 1 秒和 4 秒。这说明主线程并没有等待子线程运行完毕才结束运行，而是直接退出了，有点不符合常理。</p><p>如果我们想要主线程等待子线程运行完毕之后才退出，可以让每个子线程对象都调用下 join方法。</p><p>:::</p><h3 id="守护线程" tabindex="-1"><a class="header-anchor" href="#守护线程"><span>守护线程</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> threading, time</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">def</span><span style="color:#A6E22E;"> start</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">num</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    time.sleep(num)</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(threading.current_thread().name)</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(threading.current_thread().is_alive())</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(threading.current_thread().ident)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;start&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">thread </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> threading.Thread(</span><span style="color:#FD971F;font-style:italic;">target</span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;">start, </span><span style="color:#FD971F;font-style:italic;">name</span><span style="color:#F92672;">=</span><span style="color:#E6DB74;">&#39;my first thread&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">args</span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">1</span><span style="color:#F8F8F2;">,))</span></span>
<span class="line"><span style="color:#F8F8F2;">thread.setDaemon(</span><span style="color:#AE81FF;">True</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">thread.start()</span></span>
<span class="line"><span style="color:#66D9EF;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;stop&#39;</span><span style="color:#F8F8F2;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container info"><p class="hint-container-title">相关信息</p><p>显而易见，通过 <code>thread.setDaemon(True)</code> 命令我们把非守护线程变成了守护线程。</p></div><p>**守护线程的定义：**不等待子线程的结束，主线程结束所有线程结束。没来得及执行的子线程销毁。</p><p><strong>输出：</strong></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F8F8F2;">start</span></span>
<span class="line"><span style="color:#F8F8F2;">stop</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>::: detail</p><p>我们把主线程时间延长一点，手动等待子线程运行结束。</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> threading, time</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">def</span><span style="color:#A6E22E;"> start</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">num</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    time.sleep(num)</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(threading.current_thread().name)</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(threading.current_thread().is_alive())</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(threading.current_thread().ident)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;start&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">thread </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> threading.Thread(</span><span style="color:#FD971F;font-style:italic;">target</span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;">start, </span><span style="color:#FD971F;font-style:italic;">name</span><span style="color:#F92672;">=</span><span style="color:#E6DB74;">&#39;my first thread&#39;</span><span style="color:#F8F8F2;">, </span><span style="color:#FD971F;font-style:italic;">args</span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">1</span><span style="color:#F8F8F2;">,))</span></span>
<span class="line"><span style="color:#F8F8F2;">thread.setDaemon(</span><span style="color:#AE81FF;">True</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">thread.start()</span></span>
<span class="line"><span style="color:#F8F8F2;">time.sleep(</span><span style="color:#AE81FF;">20</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#66D9EF;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;stop&#39;</span><span style="color:#F8F8F2;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>输出：</strong></p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F8F8F2;">start</span></span>
<span class="line"><span style="color:#F8F8F2;">my first thread</span></span>
<span class="line"><span style="color:#AE81FF;">True</span></span>
<span class="line"><span style="color:#AE81FF;">1588</span></span>
<span class="line"><span style="color:#F8F8F2;">stop</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>:::</p><h3 id="线程池" tabindex="-1"><a class="header-anchor" href="#线程池"><span>线程池</span></a></h3><div class="language-python line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="python" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> time</span></span>
<span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> threadpool</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 执行比较耗时的函数，需要开多线程</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">def</span><span style="color:#A6E22E;"> get_html</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">url</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    time.sleep(</span><span style="color:#AE81FF;">3</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(url)</span></span>
<span class="line"><span style="color:#88846F;"># 按原本的单线程运行时间为：300s</span></span>
<span class="line"><span style="color:#88846F;"># 而多线程池的化：30s</span></span>
<span class="line"><span style="color:#88846F;"># 使用多线程执行 telent 函数</span></span>
<span class="line"><span style="color:#F8F8F2;">start_time </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> time.time()</span></span>
<span class="line"><span style="color:#F8F8F2;">urls </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> [i </span><span style="color:#F92672;">for</span><span style="color:#F8F8F2;"> i </span><span style="color:#F92672;">in</span><span style="color:#66D9EF;"> range</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">100</span><span style="color:#F8F8F2;">)]</span></span>
<span class="line"><span style="color:#F8F8F2;">pool </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> threadpool.ThreadPool(</span><span style="color:#AE81FF;">100</span><span style="color:#F8F8F2;">) </span><span style="color:#88846F;"># 建立线程池</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 提交任务给线程池</span></span>
<span class="line"><span style="color:#F8F8F2;">requests </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> threadpool.makeRequests(get_html, urls)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F;"># 开始执行任务</span></span>
<span class="line"><span style="color:#F92672;">for</span><span style="color:#F8F8F2;"> req </span><span style="color:#F92672;">in</span><span style="color:#F8F8F2;"> requests:</span></span>
<span class="line"><span style="color:#F8F8F2;">    pool.putRequest(req)</span></span>
<span class="line"><span style="color:#F8F8F2;">pool.wait()</span></span>
<span class="line"><span style="color:#66D9EF;">print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;:&gt;&gt;&gt;&gt;&quot;</span><span style="color:#F8F8F2;">, time.time() </span><span style="color:#F92672;">-</span><span style="color:#F8F8F2;"> start_time)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><h2 id="_10-进程" tabindex="-1"><a class="header-anchor" href="#_10-进程"><span>10. 进程</span></a></h2><ul><li><p><strong>多进程的含义：</strong> 通过上一课时我们知道，由于进程中 GIL 的存在，Python 中的多线程并不能很好地发挥多核优势，一个进程中的多个线程，在同一时刻只能有一个线程运行。而对于多进程来说，每个进程都有属于自己的 GIL，所以，在多核处理器下，多进程的运行是不会受 GIL 的影响的。因此，多进程能更好地发挥多核的优势。总的来说，Python 的多进程整体来看是比多线程更有<mark>优势</mark>的。所以，在条件允许的情况下，能用多进程就尽量用多进程。不过值得注意的是，由于进程是系统进行资源分配和调度的一个独立单位，<strong>所以各个进程之间的数据是无法共享的，如多个进程无法共享一个全局变量，进程之间的数据共享需要有单独的机制来实现</strong>，这在后面也会讲到。</p></li><li><p><strong>多进程的实现：</strong></p></li></ul><img src="/assets/76659c011acc216b7825d4f9baf3dd5-BCfy3ftl.png" alt="76659c011acc216b7825d4f9baf3dd5" style="zoom:33%;"><p>在 Python 中也有内置的库来实现多进程，它就是 multiprocessing。多线程在 IO 密集型用的比较多，也就是在爬虫方面用的比较多。而 CPU 密集型根本就不用多线程。</p><p>我们一般的策略是，多进程加多线程，这样的结合是最好。multiprocessing 提供了一系列的组件，如 Process（进程）、Queue（队列）、Semaphore（信号量）、Pipe（管道）、Lock（锁）、Pool（进程池）等，接下来让我们来了解下它们的使用方法。</p><h3 id="multiprocessing-库" tabindex="-1"><a class="header-anchor" href="#multiprocessing-库"><span>multiprocessing 库</span></a></h3><img src="/assets/09eb3d32a14d0781772516166dbe304-D8cCqGY0.png" alt="09eb3d32a14d0781772516166dbe304" style="zoom:67%;"><h3 id="代码-1" tabindex="-1"><a class="header-anchor" href="#代码-1"><span>代码</span></a></h3><ul><li>最简单的多进程的使用：</li></ul><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> multiprocessing</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">def</span><span style="color:#A6E22E;"> process</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">index</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">f</span><span style="color:#E6DB74;">&quot;Process:</span><span style="color:#AE81FF;">{</span><span style="color:#F8F8F2;">index</span><span style="color:#AE81FF;">}</span><span style="color:#E6DB74;">&quot;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">if</span><span style="color:#F8F8F2;"> __name__ </span><span style="color:#F92672;">==</span><span style="color:#E6DB74;"> &#39;__main__&#39;</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F92672;">    for</span><span style="color:#F8F8F2;"> i </span><span style="color:#F92672;">in</span><span style="color:#66D9EF;"> range</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">5</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">        p </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> multiprocessing.Process(</span><span style="color:#FD971F;font-style:italic;">target</span><span style="color:#F92672;"> =</span><span style="color:#F8F8F2;"> process, </span><span style="color:#FD971F;font-style:italic;">args</span><span style="color:#F92672;"> =</span><span style="color:#F8F8F2;"> (i,))</span></span>
<span class="line"><span style="color:#F8F8F2;">        p.start()</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li></li></ul><div class="language-python line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="python" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> multiprocessing, time</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">def</span><span style="color:#A6E22E;"> start</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">i</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    time.sleep(</span><span style="color:#AE81FF;">3</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(i)</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(multiprocessing.current_process().name)</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(multiprocessing.current_process().pid)</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(multiprocessing.current_process().is_alive())</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(multiprocessing.cpu_count())</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">if</span><span style="color:#F8F8F2;"> __name__ </span><span style="color:#F92672;">==</span><span style="color:#E6DB74;"> &#39;__main__&#39;</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;start&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    p </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> multiprocessing.Process(</span><span style="color:#FD971F;font-style:italic;">target</span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;">start, </span><span style="color:#FD971F;font-style:italic;">args</span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">1</span><span style="color:#F8F8F2;">,),</span><span style="color:#FD971F;font-style:italic;">name</span><span style="color:#F92672;"> =</span><span style="color:#E6DB74;"> &#39;p1&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F8F8F2;">    p.start()</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;stop&#39;</span><span style="color:#F8F8F2;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#88846F;"># 输出</span></span>
<span class="line"><span style="color:#F8F8F2;">start</span></span>
<span class="line"><span style="color:#F8F8F2;">stop</span></span>
<span class="line"><span style="color:#AE81FF;">1</span></span>
<span class="line"><span style="color:#F8F8F2;">p1</span></span>
<span class="line"><span style="color:#AE81FF;">18888</span></span>
<span class="line"><span style="color:#AE81FF;">True</span></span>
<span class="line"><span style="color:#AE81FF;">20</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li></li></ul><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> multiprocessing, time</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">def</span><span style="color:#A6E22E;"> process</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">index</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    time.sleep(index)</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">f</span><span style="color:#E6DB74;">&#39;Process: </span><span style="color:#AE81FF;">{</span><span style="color:#F8F8F2;">index</span><span style="color:#AE81FF;">}</span><span style="color:#E6DB74;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">if</span><span style="color:#F8F8F2;"> __name__ </span><span style="color:#F92672;">==</span><span style="color:#E6DB74;"> &#39;__main__&#39;</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F92672;">    for</span><span style="color:#F8F8F2;"> i </span><span style="color:#F92672;">in</span><span style="color:#66D9EF;"> range</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">5</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">        p </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> multiprocessing.Process(</span><span style="color:#FD971F;font-style:italic;">target</span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;">process, </span><span style="color:#FD971F;font-style:italic;">args</span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;">[i,])</span></span>
<span class="line"><span style="color:#F8F8F2;">        p.start()</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">f</span><span style="color:#E6DB74;">&#39;CPU number:</span><span style="color:#AE81FF;">{</span><span style="color:#F8F8F2;">multiprocessing.cpu_count()</span><span style="color:#AE81FF;">}</span><span style="color:#E6DB74;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#F92672;">    for</span><span style="color:#F8F8F2;"> p </span><span style="color:#F92672;">in</span><span style="color:#F8F8F2;"> multiprocessing.active_children():</span></span>
<span class="line"><span style="color:#66D9EF;">        print</span><span style="color:#F8F8F2;">(</span><span style="color:#66D9EF;font-style:italic;">f</span><span style="color:#E6DB74;">&#39;Child process name:</span><span style="color:#AE81FF;">{</span><span style="color:#F8F8F2;">p.name</span><span style="color:#AE81FF;">}</span><span style="color:#E6DB74;"> id:</span><span style="color:#AE81FF;">{</span><span style="color:#F8F8F2;">p.pid</span><span style="color:#AE81FF;">}</span><span style="color:#E6DB74;">&#39;</span><span style="color:#F8F8F2;">)</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Process Ended&quot;</span><span style="color:#F8F8F2;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F8F8F2;">Process: </span><span style="color:#AE81FF;">0</span></span>
<span class="line"><span style="color:#AE81FF;">CPU</span><span style="color:#F8F8F2;"> number:</span><span style="color:#AE81FF;">20</span></span>
<span class="line"><span style="color:#F8F8F2;">Child process name:Process</span><span style="color:#F92672;">-</span><span style="color:#AE81FF;">3</span><span style="color:#66D9EF;"> id</span><span style="color:#F8F8F2;">:</span><span style="color:#AE81FF;">15888</span></span>
<span class="line"><span style="color:#F8F8F2;">Child process name:Process</span><span style="color:#F92672;">-</span><span style="color:#AE81FF;">4</span><span style="color:#66D9EF;"> id</span><span style="color:#F8F8F2;">:</span><span style="color:#AE81FF;">15688</span></span>
<span class="line"><span style="color:#F8F8F2;">Child process name:Process</span><span style="color:#F92672;">-</span><span style="color:#AE81FF;">5</span><span style="color:#66D9EF;"> id</span><span style="color:#F8F8F2;">:</span><span style="color:#AE81FF;">6680</span></span>
<span class="line"><span style="color:#F8F8F2;">Child process name:Process</span><span style="color:#F92672;">-</span><span style="color:#AE81FF;">2</span><span style="color:#66D9EF;"> id</span><span style="color:#F8F8F2;">:</span><span style="color:#AE81FF;">25484</span></span>
<span class="line"><span style="color:#F8F8F2;">Process Ended</span></span>
<span class="line"><span style="color:#F8F8F2;">Process: </span><span style="color:#AE81FF;">1</span></span>
<span class="line"><span style="color:#F8F8F2;">Process: </span><span style="color:#AE81FF;">2</span></span>
<span class="line"><span style="color:#F8F8F2;">Process: </span><span style="color:#AE81FF;">3</span></span>
<span class="line"><span style="color:#F8F8F2;">Process: </span><span style="color:#AE81FF;">4</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="进程池" tabindex="-1"><a class="header-anchor" href="#进程池"><span>进程池</span></a></h3><ul><li><strong>进程池执行多个任务：</strong></li></ul><div class="language-python line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="python" style="--vp-collapsed-lines:15;background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F92672;">from</span><span style="color:#F8F8F2;"> multiprocessing </span><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> Pool</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">def</span><span style="color:#A6E22E;"> function_square</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">data</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">    result </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> data</span><span style="color:#F92672;">*</span><span style="color:#F8F8F2;">data</span></span>
<span class="line"><span style="color:#F92672;">    return</span><span style="color:#F8F8F2;"> result</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">if</span><span style="color:#F8F8F2;"> __name__ </span><span style="color:#F92672;">==</span><span style="color:#E6DB74;"> &#39;__main__&#39;</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">    inputs </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> [i </span><span style="color:#F92672;">for</span><span style="color:#F8F8F2;"> i </span><span style="color:#F92672;">in</span><span style="color:#66D9EF;"> range</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">100</span><span style="color:#F8F8F2;">)]</span></span>
<span class="line"><span style="color:#88846F;">	# 那么，我们可以首先声明这个进程池；</span></span>
<span class="line"><span style="color:#F8F8F2;">    pool </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> Pool(</span><span style="color:#FD971F;font-style:italic;">processes</span><span style="color:#F92672;">=</span><span style="color:#AE81FF;">4</span><span style="color:#F8F8F2;">) </span><span style="color:#88846F;"># 如果不定义数字，他会根据你的电脑情况自行创建</span></span>
<span class="line"><span style="color:#88846F;">	# 然后，使用 map 方法，那其实这个 map 方法和正常的 map 方法是一致的。</span></span>
<span class="line"><span style="color:#88846F;">	# map：</span></span>
<span class="line"><span style="color:#88846F;">	# pool = Pool()</span></span>
<span class="line"><span style="color:#88846F;">	# pool.map(main, [i*10 for i in range(10)])</span></span>
<span class="line"><span style="color:#88846F;">	# 第一个参数：他会将数组中的每一个元素拿出来，当作函数的一个个参数，然后创建一个个进程，放到进程池里面去运行。</span></span>
<span class="line"><span style="color:#88846F;">	# 第二个参数：构造一个数组，然后也就是 0 到 99 的这么一个循环，那我们直接使用 list 构造一下</span></span>
<span class="line"><span style="color:#F8F8F2;">    pool_outputs </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> pool.map(function_square, inputs)</span></span>
<span class="line"><span style="color:#F8F8F2;">    pool.close()</span></span>
<span class="line"><span style="color:#F8F8F2;">    pool.join()</span></span>
<span class="line"><span style="color:#66D9EF;">    print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&#39;Pool  :&#39;</span><span style="color:#F8F8F2;">, pool_outputs)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><ul><li><strong>进程池执行单个任务：</strong></li></ul><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="background-color:#272822;color:#F8F8F2;"><pre class="shiki monokai vp-code"><code><span class="line"><span style="color:#F92672;">from</span><span style="color:#F8F8F2;"> multiprocessing </span><span style="color:#F92672;">import</span><span style="color:#F8F8F2;"> Pool</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic;">def</span><span style="color:#A6E22E;"> function_square</span><span style="color:#F8F8F2;">(</span><span style="color:#FD971F;font-style:italic;">data</span><span style="color:#F8F8F2;">):</span></span>
<span class="line"><span style="color:#F8F8F2;">	result </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> data</span><span style="color:#F92672;">*</span><span style="color:#F8F8F2;">data</span></span>
<span class="line"><span style="color:#F92672;">	return</span><span style="color:#F8F8F2;"> result</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672;">if</span><span style="color:#F8F8F2;"> __name__ </span><span style="color:#F92672;">==</span><span style="color:#E6DB74;"> &#39;__main__&#39;</span><span style="color:#F8F8F2;">:</span></span>
<span class="line"><span style="color:#F8F8F2;">	pool </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> Pool(</span><span style="color:#FD971F;font-style:italic;">processes</span><span style="color:#F92672;">=</span><span style="color:#AE81FF;">4</span><span style="color:#F8F8F2;">) </span><span style="color:#88846F;"># 如果你不指定数目的化，它就会根据你电脑状态，自行创建。（按你的电脑自动创建相应的数目）</span></span>
<span class="line"><span style="color:#88846F;">	# map 把任务交给进程池</span></span>
<span class="line"><span style="color:#88846F;">	# pool.map(function, iterable)</span></span>
<span class="line"><span style="color:#F8F8F2;">	pool_outputs </span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;"> pool.apply(function_square, </span><span style="color:#FD971F;font-style:italic;">args</span><span style="color:#F92672;">=</span><span style="color:#F8F8F2;">(</span><span style="color:#AE81FF;">10</span><span style="color:#F8F8F2;">, ))</span></span>
<span class="line"><span style="color:#F8F8F2;">	pool.close()</span></span>
<span class="line"><span style="color:#F8F8F2;">	pool.join()</span></span>
<span class="line"><span style="color:#66D9EF;">	print</span><span style="color:#F8F8F2;">(</span><span style="color:#E6DB74;">&quot;Pool     :&quot;</span><span style="color:#F8F8F2;">, pool_outputs)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!----><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">上次编辑于: </span><span class="vp-meta-info" data-allow-mismatch="text">2024/12/5 08:49:52</span></div><div class="contributors"><span class="vp-meta-label">贡献者: </span><!--[--><!--[--><span class="vp-meta-info" title="email: 2310219843@qq.com">Xiaoxianyue</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/zh/Advanced_Algorithms/Week0910.html" aria-label="高级算法——第9,10周查漏补缺" iconsizing="both"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><i class="vp-icon iconfont icon-python" sizing="height"></i>高级算法——第9,10周查漏补缺</div></a><a class="route-link auto-link next" href="/zh/Advanced_Algorithms/Week10.html" aria-label="高级算法——第10周ppt总结" iconsizing="both"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">高级算法——第10周ppt总结<i class="vp-icon iconfont icon-python" sizing="height"></i></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">默认页脚</div><div class="vp-copyright">Copyright © 2025 XiaoXianYue </div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/assets/app-84lBMjzT.js" defer></script>
  </body>
</html>
